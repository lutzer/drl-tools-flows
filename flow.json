[
    {
        "id": "29928cb0.ddef64",
        "type": "tab",
        "label": "Example",
        "disabled": true,
        "info": ""
    },
    {
        "id": "6dbde5f0.a7aefc",
        "type": "tab",
        "label": "Kiezgeschichten",
        "disabled": true,
        "info": ""
    },
    {
        "id": "4a06756c.fb29bc",
        "type": "tab",
        "label": "Futurium",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5fecfc4e.735094",
        "type": "tab",
        "label": "Test",
        "disabled": false,
        "info": ""
    },
    {
        "id": "965f4c84.d4613",
        "type": "tab",
        "label": "File Uploader",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d9115fe7.1fc6d",
        "type": "subflow",
        "name": "speech-to-text",
        "info": "",
        "category": "tools",
        "in": [
            {
                "x": 140,
                "y": 700,
                "wires": [
                    {
                        "id": "c988bcb5.5a0be"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 980,
                "y": 280,
                "wires": [
                    {
                        "id": "7e7bd489.1b262c",
                        "port": 0
                    },
                    {
                        "id": "304c9104.8c0aae",
                        "port": 0
                    }
                ]
            },
            {
                "x": 980,
                "y": 340,
                "wires": [
                    {
                        "id": "37425a1d.e84cb6",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "language",
                "type": "str",
                "value": "de",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            },
            {
                "name": "timeout",
                "type": "num",
                "value": "2",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            },
            {
                "name": "initialWait",
                "type": "num",
                "value": "10",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            },
            {
                "name": "duration",
                "type": "num",
                "value": "60",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            },
            {
                "name": "playBeep",
                "type": "bool",
                "value": "true",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "bool"
                        ]
                    }
                }
            }
        ],
        "color": "#FDD0A2",
        "outputLabels": [
            "transcript",
            "intermediate"
        ],
        "icon": "font-awesome/fa-microphone",
        "status": {
            "x": 980,
            "y": 120,
            "wires": [
                {
                    "id": "fe9f376.9f7dfc8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "400cca0.99e3638",
        "type": "subflow",
        "name": "tools-file-uploader",
        "info": "This node needs to be in an active flow to enable the upload web interface: [Link](/uploads).\nOnly one instance of this node should be active at a time.\n",
        "category": "tools",
        "in": [],
        "out": [],
        "env": [
            {
                "name": "fileDirectory",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            }
        ],
        "color": "#C0DEED",
        "icon": "font-awesome/fa-upload"
    },
    {
        "id": "aaf06e2c.e5b2f",
        "type": "subflow",
        "name": "tools output writer",
        "info": "",
        "category": "tools",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "4d41ee73.24003"
                    }
                ]
            }
        ],
        "out": [],
        "env": [
            {
                "name": "filepath",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            },
            {
                "name": "topic",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            }
        ],
        "color": "#C0DEED",
        "icon": "font-awesome/fa-save",
        "status": {
            "x": 900,
            "y": 120,
            "wires": [
                {
                    "id": "42a63d67.d4def4",
                    "port": 0
                },
                {
                    "id": "4ae4daed.2d7f54",
                    "port": 0
                },
                {
                    "id": "9aabf298.0b56e",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "98284da6.430f8",
        "type": "group",
        "z": "29928cb0.ddef64",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "68fdf52d.1c99dc",
            "81aed966.ebadd8",
            "6e155f41.5635b",
            "fecc3e62.d266f",
            "bc7ab630.9dac68",
            "b90b610c.554ac",
            "c196ff51.b0952"
        ],
        "x": 314,
        "y": 99,
        "w": 1132,
        "h": 222
    },
    {
        "id": "a8081aca.df57b8",
        "type": "group",
        "z": "29928cb0.ddef64",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "e89ec1ba.979e5",
            "bec2c8b0.15be08",
            "9a382a9b.e2dd78",
            "3cfe07d8.4c92d8",
            "4341ba2b.f38f84"
        ],
        "x": 314,
        "y": 379,
        "w": 872,
        "h": 162
    },
    {
        "id": "fec5c43f.4caea8",
        "type": "group",
        "z": "29928cb0.ddef64",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "98bc2bf7.6ca018",
            "cb462194.001c2",
            "493d362f.229aa8",
            "73827c9a.ce4794",
            "fa2af600.fbf0f8",
            "9875010.9d1e3",
            "dba86aa0.7fd678",
            "916ee524.eed348"
        ],
        "x": 314,
        "y": 599,
        "w": 712,
        "h": 222
    },
    {
        "id": "7f6892dc.4d798c",
        "type": "group",
        "z": "29928cb0.ddef64",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5eae2d88.de40d4",
            "aa0a7f07.b72af",
            "990da5ae.a2f568",
            "c73765d4.c77538",
            "bed8a17f.0a7b7"
        ],
        "x": 1074,
        "y": 599,
        "w": 712,
        "h": 222
    },
    {
        "id": "bc4a0f7b.4ef6f",
        "type": "group",
        "z": "29928cb0.ddef64",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "fad51bc4.ebd5f8",
            "ccbe8e67.a7c8",
            "e150954.bc7ee68",
            "f5e6377c.9b9fc8",
            "ef4c666c.3eb1a8",
            "3240d69a.8af01a"
        ],
        "x": 314,
        "y": 879,
        "w": 972,
        "h": 262
    },
    {
        "id": "c531aa1.9af8558",
        "type": "soundfile-directory",
        "directory": "sounds"
    },
    {
        "id": "f0c6baff.ba8948",
        "type": "soundfile-directory",
        "directory": "/Users/lutz/Desktop/futurium-dialog/rebecca"
    },
    {
        "id": "113bba6b.b1a796",
        "type": "soundfile-directory",
        "directory": "/Users/lutz/Desktop/futurium-dialog/rebecca"
    },
    {
        "id": "cfbb12ea.54ab9",
        "type": "socketio-config",
        "uri": "http://tools.drlab.org",
        "options": "{ \"forceNew\": true }"
    },
    {
        "id": "b7f1f48.d6bf208",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "8d5c3afb.dd9ec8",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "b9dbe733.9dccf8",
        "type": "ui_group",
        "name": "Default",
        "tab": "b7f1f48.d6bf208",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "160e81fb.f1c86e",
        "type": "ui_group",
        "name": "File Browser",
        "tab": "b63d1f91.68095",
        "order": 1,
        "disp": true,
        "width": "18",
        "collapse": false
    },
    {
        "id": "b63d1f91.68095",
        "type": "ui_tab",
        "name": "Files",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1d5cf971.7c7997",
        "type": "inject",
        "z": "29928cb0.ddef64",
        "name": "start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 260,
        "wires": [
            [
                "bc7ab630.9dac68"
            ]
        ]
    },
    {
        "id": "68fdf52d.1c99dc",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "",
        "text": "Hallo, willkommen im Museum.",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 710,
        "y": 200,
        "wires": [
            [
                "81aed966.ebadd8"
            ]
        ]
    },
    {
        "id": "81aed966.ebadd8",
        "type": "delay",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1020,
        "y": 240,
        "wires": [
            [
                "6e155f41.5635b"
            ]
        ]
    },
    {
        "id": "6e155f41.5635b",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "",
        "text": "Vermisst du das Museum ueberhaupt?",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 1270,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "98bc2bf7.6ca018",
        "type": "switch",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 390,
        "y": 740,
        "wires": [
            [
                "cb462194.001c2"
            ],
            [
                "493d362f.229aa8"
            ],
            [
                "73827c9a.ce4794"
            ]
        ]
    },
    {
        "id": "cb462194.001c2",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "text": "Das freut mich. Ich bin auch gerne hier.",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 680,
        "y": 700,
        "wires": [
            [
                "9875010.9d1e3"
            ]
        ]
    },
    {
        "id": "493d362f.229aa8",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "text": "Du findest es also langweilig hier?",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 660,
        "y": 740,
        "wires": [
            [
                "fa2af600.fbf0f8"
            ]
        ]
    },
    {
        "id": "73827c9a.ce4794",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "text": "Ich habe dich leider nicht verstanden",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 670,
        "y": 780,
        "wires": [
            [
                "dba86aa0.7fd678"
            ]
        ]
    },
    {
        "id": "e89ec1ba.979e5",
        "type": "switch",
        "z": "29928cb0.ddef64",
        "g": "a8081aca.df57b8",
        "name": "isEmpty",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 620,
        "y": 500,
        "wires": [
            [
                "bec2c8b0.15be08"
            ],
            [
                "3cfe07d8.4c92d8"
            ]
        ]
    },
    {
        "id": "bec2c8b0.15be08",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "a8081aca.df57b8",
        "name": "",
        "text": "Du hast ja gar nichts gesagt.",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 880,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "fa2af600.fbf0f8",
        "type": "delay",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 930,
        "y": 740,
        "wires": [
            [
                "5eae2d88.de40d4"
            ]
        ]
    },
    {
        "id": "5eae2d88.de40d4",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "7f6892dc.4d798c",
        "name": "",
        "text": "was müsste es denn hier geben damit du ins museum gehen willst?",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 1340,
        "y": 740,
        "wires": [
            [
                "bed8a17f.0a7b7"
            ]
        ]
    },
    {
        "id": "9875010.9d1e3",
        "type": "delay",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 930,
        "y": 700,
        "wires": [
            [
                "aa0a7f07.b72af"
            ]
        ]
    },
    {
        "id": "aa0a7f07.b72af",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "7f6892dc.4d798c",
        "name": "",
        "text": "Vermisst du denn trotzdem irgendwas am Museum?",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 1380,
        "y": 700,
        "wires": [
            [
                "bed8a17f.0a7b7"
            ]
        ]
    },
    {
        "id": "dba86aa0.7fd678",
        "type": "delay",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 930,
        "y": 780,
        "wires": [
            [
                "990da5ae.a2f568"
            ]
        ]
    },
    {
        "id": "990da5ae.a2f568",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "7f6892dc.4d798c",
        "name": "",
        "text": "Was hältst du denn von Museum?",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 1440,
        "y": 780,
        "wires": [
            [
                "bed8a17f.0a7b7"
            ]
        ]
    },
    {
        "id": "fad51bc4.ebd5f8",
        "type": "debug",
        "z": "29928cb0.ddef64",
        "g": "bc4a0f7b.4ef6f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 1100,
        "wires": []
    },
    {
        "id": "ccbe8e67.a7c8",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "bc4a0f7b.4ef6f",
        "name": "",
        "text": "Danke fuer deine Antwort. Ich hoffe wir sprechen uns bald wieder.",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 1020,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "e150954.bc7ee68",
        "type": "switch",
        "z": "29928cb0.ddef64",
        "g": "bc4a0f7b.4ef6f",
        "name": "isEmpty",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 660,
        "y": 1000,
        "wires": [
            [
                "f5e6377c.9b9fc8"
            ],
            [
                "ccbe8e67.a7c8"
            ]
        ]
    },
    {
        "id": "f5e6377c.9b9fc8",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "bc4a0f7b.4ef6f",
        "name": "",
        "text": "Na, vielleicht fällt dir ja spaeter noch etwas ein.",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 960,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "9a382a9b.e2dd78",
        "type": "comment",
        "z": "29928cb0.ddef64",
        "g": "a8081aca.df57b8",
        "name": "listening to yes/no",
        "info": "",
        "x": 430,
        "y": 420,
        "wires": []
    },
    {
        "id": "fecc3e62.d266f",
        "type": "comment",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "welcome",
        "info": "",
        "x": 400,
        "y": 140,
        "wires": []
    },
    {
        "id": "916ee524.eed348",
        "type": "comment",
        "z": "29928cb0.ddef64",
        "g": "fec5c43f.4caea8",
        "name": "response on yes/no",
        "info": "",
        "x": 430,
        "y": 640,
        "wires": []
    },
    {
        "id": "c73765d4.c77538",
        "type": "comment",
        "z": "29928cb0.ddef64",
        "g": "7f6892dc.4d798c",
        "name": "follow up question",
        "info": "",
        "x": 1190,
        "y": 640,
        "wires": []
    },
    {
        "id": "ef4c666c.3eb1a8",
        "type": "comment",
        "z": "29928cb0.ddef64",
        "g": "bc4a0f7b.4ef6f",
        "name": "listening and transcribing response",
        "info": "",
        "x": 480,
        "y": 920,
        "wires": []
    },
    {
        "id": "3240d69a.8af01a",
        "type": "comment",
        "z": "29928cb0.ddef64",
        "g": "bc4a0f7b.4ef6f",
        "name": "output",
        "info": "",
        "x": 650,
        "y": 1060,
        "wires": []
    },
    {
        "id": "bc7ab630.9dac68",
        "type": "random-output",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "",
        "outputs": 3,
        "x": 420,
        "y": 240,
        "wires": [
            [
                "68fdf52d.1c99dc"
            ],
            [
                "b90b610c.554ac"
            ],
            [
                "c196ff51.b0952"
            ]
        ]
    },
    {
        "id": "b90b610c.554ac",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "",
        "text": "Hallo, schön, dass du da bist",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 700,
        "y": 240,
        "wires": [
            [
                "81aed966.ebadd8"
            ]
        ]
    },
    {
        "id": "c196ff51.b0952",
        "type": "say",
        "z": "29928cb0.ddef64",
        "g": "98284da6.430f8",
        "name": "",
        "text": "Herzlich willkommen bei uns im Museum",
        "voice": ":",
        "voiceString": "Anna",
        "speed": "",
        "x": 740,
        "y": 280,
        "wires": [
            [
                "81aed966.ebadd8"
            ]
        ]
    },
    {
        "id": "bed8a17f.0a7b7",
        "type": "function",
        "z": "29928cb0.ddef64",
        "g": "7f6892dc.4d798c",
        "name": "_",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1710,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "4341ba2b.f38f84",
        "type": "change",
        "z": "29928cb0.ddef64",
        "g": "a8081aca.df57b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "answer",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 500,
        "wires": [
            [
                "98bc2bf7.6ca018"
            ]
        ]
    },
    {
        "id": "3cfe07d8.4c92d8",
        "type": "fuzzy-match",
        "z": "29928cb0.ddef64",
        "g": "a8081aca.df57b8",
        "name": "recognize yes/no",
        "choices": "yes:Ja * vermisse es\nyes:Ja\nyes:aufjedenfall\nyes:Manchmal schon\nyes:schon\nyes:ja sehr\nno:nein\nno:* vermisse es nicht\nno:* langweilig\nno:nee\nno:nein überhaupt nicht",
        "scorer": "WRatio",
        "limit": "0",
        "cutoff": "50",
        "x": 850,
        "y": 500,
        "wires": [
            [
                "4341ba2b.f38f84"
            ],
            []
        ]
    },
    {
        "id": "6a5903c5.7f73dc",
        "type": "inject",
        "z": "6dbde5f0.a7aefc",
        "name": "start",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 180,
        "wires": [
            [
                "bde09bf0.190058"
            ]
        ]
    },
    {
        "id": "bde09bf0.190058",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "01_hallo.aif",
        "allow_multiple": false,
        "x": 350,
        "y": 180,
        "wires": [
            [
                "c3176fa.d7e149"
            ]
        ]
    },
    {
        "id": "c3176fa.d7e149",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 590,
        "y": 180,
        "wires": [
            [
                "40cee1ee.750eb"
            ]
        ]
    },
    {
        "id": "40cee1ee.750eb",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "02_datenschutz.aif",
        "allow_multiple": false,
        "x": 930,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "5c433879.7dae18",
        "type": "fuzzy-match",
        "z": "6dbde5f0.a7aefc",
        "name": "recognize yes/no",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:aufjedenfall\nyes:klar\nyes:gerne\nyes:einverstanden\nyes:Ok\nyes:Okay\nyes:In ordnung\nyes:ja * wieso nicht\nno:nein * bitte nicht\nno:nein\nno:aufkeinenfall\nno:möchte ich nicht\nno:will ich nicht",
        "scorer": "token_sort_ratio",
        "limit": "0",
        "cutoff": "30",
        "x": 1330,
        "y": 180,
        "wires": [
            [
                "e9637c72.67a46"
            ],
            []
        ]
    },
    {
        "id": "5d1a1c98.ef9ac4",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Begrüssung",
        "info": "",
        "x": 350,
        "y": 140,
        "wires": []
    },
    {
        "id": "c909f3d6.06896",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Datenschutz Frage",
        "info": "",
        "x": 930,
        "y": 140,
        "wires": []
    },
    {
        "id": "7308422d.bd651c",
        "type": "switch",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1890,
        "y": 180,
        "wires": [
            [
                "8616270a.4ccc08"
            ],
            [
                "5cffede6.b0c6e4"
            ]
        ]
    },
    {
        "id": "8616270a.4ccc08",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "03_startfrage.aif",
        "allow_multiple": false,
        "x": 360,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b900f6ab.2c4bd8",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Datenschutz Ja / Wohnst du gerade in der Gegend?",
        "info": "",
        "x": 470,
        "y": 360,
        "wires": []
    },
    {
        "id": "abf67973.d23ee8",
        "type": "fuzzy-match",
        "z": "6dbde5f0.a7aefc",
        "name": "recognize yes/no",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:ja, ich wohne hier\nyes:ja klar\nyes:Ja, ich wohne in der \nno:nein\nno:nein, ich wohne woanders\nno:nein, ich wohne nicht hier\nno:Nee",
        "scorer": "token_sort_ratio",
        "limit": "0",
        "cutoff": "30",
        "x": 770,
        "y": 400,
        "wires": [
            [
                "1ac3e472.b0b89c"
            ],
            []
        ]
    },
    {
        "id": "3a23dd73.e71b62",
        "type": "switch",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 400,
        "wires": [
            [
                "62efa8f0.4ba318"
            ],
            [
                "101c0a98.fad895"
            ]
        ]
    },
    {
        "id": "5cffede6.b0c6e4",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "11_datenschutz_nein.aif",
        "allow_multiple": false,
        "x": 1890,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "21a0c6ad.699c1a",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1750,
        "y": 180,
        "wires": [
            [
                "7308422d.bd651c"
            ]
        ]
    },
    {
        "id": "222ca8e0.53e718",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Datenschutz Nein",
        "info": "",
        "x": 1870,
        "y": 700,
        "wires": []
    },
    {
        "id": "f0d50b5a.9c2018",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1170,
        "y": 400,
        "wires": [
            [
                "3a23dd73.e71b62"
            ]
        ]
    },
    {
        "id": "62efa8f0.4ba318",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "04_frage1_ja.aif",
        "allow_multiple": false,
        "x": 360,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "6320d27f.9dbe9c",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Ja, wohne in der Gegend",
        "info": "",
        "x": 390,
        "y": 500,
        "wires": []
    },
    {
        "id": "47ba9f5.526af6",
        "type": "change",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "answer1",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 540,
        "wires": [
            [
                "8db65212.3e108"
            ]
        ]
    },
    {
        "id": "292f2185.f1b74e",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "06_frage2.aif",
        "allow_multiple": false,
        "x": 350,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "10c96d8e.e324f2",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Frage nach besonderem Erlebnis",
        "info": "",
        "x": 410,
        "y": 740,
        "wires": []
    },
    {
        "id": "8db65212.3e108",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1090,
        "y": 540,
        "wires": [
            [
                "292f2185.f1b74e"
            ]
        ]
    },
    {
        "id": "ffd72280.9a46e",
        "type": "change",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "answer2",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 780,
        "wires": [
            [
                "c1a9dff5.bc7ff"
            ]
        ]
    },
    {
        "id": "c1a9dff5.bc7ff",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 950,
        "y": 780,
        "wires": [
            [
                "f4c48425.7204d8"
            ]
        ]
    },
    {
        "id": "a0a37c76.5918d",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Danke",
        "info": "",
        "x": 330,
        "y": 880,
        "wires": []
    },
    {
        "id": "f4c48425.7204d8",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "08_danke_geschichte.aif",
        "allow_multiple": false,
        "x": 390,
        "y": 920,
        "wires": [
            [
                "391f8924.ead636"
            ]
        ]
    },
    {
        "id": "391f8924.ead636",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 630,
        "y": 920,
        "wires": [
            [
                "be65d672.b1b588"
            ]
        ]
    },
    {
        "id": "be65d672.b1b588",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "09_andere_kiezgeschichte.aif",
        "allow_multiple": false,
        "x": 1890,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "a3da1af3.c43ae8",
        "type": "fuzzy-match",
        "z": "6dbde5f0.a7aefc",
        "name": "recognize yes/no",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:gerne\nyes:ja bitte\nyes:gerne\nyes:klar\nno:nein\nno:heute nicht\nno:will ich nicht\nno:moechte ich nicht",
        "scorer": "token_sort_ratio",
        "limit": "0",
        "cutoff": "30",
        "x": 2370,
        "y": 820,
        "wires": [
            [
                "dd62a423.a9ebe8"
            ],
            []
        ]
    },
    {
        "id": "91d4f892.f42ff8",
        "type": "switch",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2730,
        "y": 820,
        "wires": [
            [
                "2c87df3.928852"
            ],
            [
                "2c87df3.928852"
            ],
            [
                "2c87df3.928852"
            ]
        ]
    },
    {
        "id": "2c87df3.928852",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "10_danke_tschuess.aif",
        "allow_multiple": false,
        "x": 2960,
        "y": 820,
        "wires": [
            [
                "bf6ef783.de1118",
                "58a47ec5.6a324"
            ]
        ]
    },
    {
        "id": "3344258.8a554da",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Moechtest du eine Geschichte hoeren?",
        "info": "",
        "x": 2230,
        "y": 780,
        "wires": []
    },
    {
        "id": "973286e4.4b50f8",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Verabschiedung",
        "info": "",
        "x": 2940,
        "y": 780,
        "wires": []
    },
    {
        "id": "bf6ef783.de1118",
        "type": "debug",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 740,
        "wires": []
    },
    {
        "id": "101c0a98.fad895",
        "type": "play-soundfile",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "directory": "f0c6baff.ba8948",
        "file": "05_frage1_nein.aif",
        "allow_multiple": false,
        "x": 370,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "cfbd84da.1d66d8",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "Nein, wohne nicht hier",
        "info": "",
        "x": 380,
        "y": 600,
        "wires": []
    },
    {
        "id": "b9b14a75.48c2e8",
        "type": "inject",
        "z": "6dbde5f0.a7aefc",
        "name": "reset",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "2e415449.e28c5c"
            ]
        ]
    },
    {
        "id": "2e415449.e28c5c",
        "type": "change",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "recording",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "68eddc5d.88c3c4",
        "type": "file",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "filename": "/Users/lutz/Desktop/kiezgeschichten-dialog/answers.txt",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2630,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "1a69b483.53985b",
        "type": "template",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "time: {{time}}; select1: {{select1.key}}; select2: {{select2.key}}; answer1: {{answer1}}; answer2: {{answer2}}",
        "output": "str",
        "x": 2320,
        "y": 960,
        "wires": [
            [
                "68eddc5d.88c3c4"
            ]
        ]
    },
    {
        "id": "68974f52.c4c9a",
        "type": "comment",
        "z": "6dbde5f0.a7aefc",
        "name": "In datei speichern",
        "info": "",
        "x": 2170,
        "y": 920,
        "wires": []
    },
    {
        "id": "1ac3e472.b0b89c",
        "type": "change",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "select2",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 400,
        "wires": [
            [
                "f0d50b5a.9c2018"
            ]
        ]
    },
    {
        "id": "e9637c72.67a46",
        "type": "change",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "select1",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 180,
        "wires": [
            [
                "21a0c6ad.699c1a"
            ]
        ]
    },
    {
        "id": "58a47ec5.6a324",
        "type": "change",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "time",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2150,
        "y": 960,
        "wires": [
            [
                "1a69b483.53985b"
            ]
        ]
    },
    {
        "id": "dd62a423.a9ebe8",
        "type": "delay",
        "z": "6dbde5f0.a7aefc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2570,
        "y": 820,
        "wires": [
            [
                "91d4f892.f42ff8"
            ]
        ]
    },
    {
        "id": "91752b72.02cba8",
        "type": "inject",
        "z": "4a06756c.fb29bc",
        "name": "start",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 170,
        "y": 200,
        "wires": [
            [
                "223d2bf4.4932b4"
            ]
        ]
    },
    {
        "id": "223d2bf4.4932b4",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "01_Hallo.wav",
        "options": "",
        "allow_multiple": false,
        "x": 370,
        "y": 200,
        "wires": [
            [
                "9c89a05f.e7694",
                "df0ab0a.fd2525"
            ]
        ]
    },
    {
        "id": "9c89a05f.e7694",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 610,
        "y": 200,
        "wires": [
            [
                "a7799a33.f32428"
            ]
        ]
    },
    {
        "id": "a7799a33.f32428",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "02_Datenschutz.wav",
        "options": "",
        "allow_multiple": false,
        "x": 900,
        "y": 200,
        "wires": [
            [
                "b40ff449.9bd578"
            ]
        ]
    },
    {
        "id": "3df70560.4cbdba",
        "type": "fuzzy-match",
        "z": "4a06756c.fb29bc",
        "name": "recognize yes/no",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:aufjedenfall\nyes:klar\nyes:gerne\nyes:einverstanden\nyes:Ok\nyes:Okay\nyes:In ordnung\nyes:ja * wieso nicht\nno:nein * bitte nicht\nno:nein\nno:aufkeinenfall\nno:möchte ich nicht\nno:will ich nicht\nno:nee\nno:lieber nicht",
        "scorer": "token_sort_ratio",
        "limit": "0",
        "cutoff": "30",
        "x": 1350,
        "y": 200,
        "wires": [
            [
                "44409dca.4c5454",
                "5edf2052.64a29"
            ],
            []
        ]
    },
    {
        "id": "4eaed88c.d5fc58",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Begrüssung",
        "info": "",
        "x": 370,
        "y": 160,
        "wires": []
    },
    {
        "id": "ae6fabba.be2ff8",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Datenschutz Frage",
        "info": "",
        "x": 950,
        "y": 160,
        "wires": []
    },
    {
        "id": "6b3e7318.93a25c",
        "type": "switch",
        "z": "4a06756c.fb29bc",
        "name": "",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 200,
        "wires": [
            [
                "d5e84c21.9e042"
            ],
            [
                "3a8f010f.e6ccee"
            ]
        ]
    },
    {
        "id": "d5e84c21.9e042",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "03_seitDreiWochen.wav",
        "options": "",
        "allow_multiple": false,
        "x": 410,
        "y": 400,
        "wires": [
            [
                "78acd09c.97a66"
            ]
        ]
    },
    {
        "id": "7a68758a.01c34c",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Datenschutz Ja / Geschichte",
        "info": "",
        "x": 420,
        "y": 360,
        "wires": []
    },
    {
        "id": "3a8f010f.e6ccee",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "09_Nein.wav",
        "allow_multiple": false,
        "x": 2070,
        "y": 400,
        "wires": [
            [
                "5bf4f619.737b88"
            ]
        ]
    },
    {
        "id": "5edf2052.64a29",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1560,
        "y": 200,
        "wires": [
            [
                "6b3e7318.93a25c"
            ]
        ]
    },
    {
        "id": "687bc218.ef272c",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Datenschutz Nein",
        "info": "",
        "x": 2090,
        "y": 360,
        "wires": []
    },
    {
        "id": "78acd09c.97a66",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 600,
        "y": 400,
        "wires": [
            [
                "2e1e323f.d7290e"
            ]
        ]
    },
    {
        "id": "2fa7c47f.b2154c",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "05_Frage1_deineMeinung.wav",
        "allow_multiple": false,
        "x": 430,
        "y": 540,
        "wires": [
            [
                "556efcb9.f91054"
            ]
        ]
    },
    {
        "id": "bf20ebd0.988888",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Wo engagieren?",
        "info": "",
        "x": 380,
        "y": 500,
        "wires": []
    },
    {
        "id": "af386139.abee1",
        "type": "change",
        "z": "4a06756c.fb29bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "answer1",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 540,
        "wires": [
            [
                "10fabef5.aba741"
            ]
        ]
    },
    {
        "id": "ae06731b.68017",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "06_Frage2_wofuerEngagiert.wav",
        "allow_multiple": false,
        "x": 440,
        "y": 680,
        "wires": [
            [
                "cb9ffe1.8e771"
            ]
        ]
    },
    {
        "id": "c4a2a98b.74d388",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Wo hast du dich schonmal engagiert?",
        "info": "",
        "x": 450,
        "y": 640,
        "wires": []
    },
    {
        "id": "10fabef5.aba741",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1040,
        "y": 540,
        "wires": [
            [
                "ae06731b.68017"
            ]
        ]
    },
    {
        "id": "3c9c1082.eeefa",
        "type": "change",
        "z": "4a06756c.fb29bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "answer2",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 680,
        "wires": [
            [
                "3f62c0dd.dbf8e"
            ]
        ]
    },
    {
        "id": "3f62c0dd.dbf8e",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1100,
        "y": 680,
        "wires": [
            [
                "a397d564.f61628"
            ]
        ]
    },
    {
        "id": "2eb9ca5b.5f7e16",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Danke",
        "info": "",
        "x": 350,
        "y": 780,
        "wires": []
    },
    {
        "id": "a397d564.f61628",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "07_nochWeitereStimmen.wav",
        "allow_multiple": false,
        "x": 430,
        "y": 820,
        "wires": [
            [
                "584b8fab.7360c"
            ]
        ]
    },
    {
        "id": "584b8fab.7360c",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 710,
        "y": 820,
        "wires": [
            [
                "5bf4f619.737b88"
            ]
        ]
    },
    {
        "id": "55b19002.b79aa",
        "type": "fuzzy-match",
        "z": "4a06756c.fb29bc",
        "name": "recognize yes/no",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:gerne\nyes:ja bitte\nyes:gerne\nyes:klar\nno:nein\nno:heute nicht\nno:will ich nicht\nno:moechte ich nicht",
        "scorer": "token_sort_ratio",
        "limit": "0",
        "cutoff": "30",
        "x": 2310,
        "y": 820,
        "wires": [
            [
                "a131fc76.02f68",
                "61641ef2.ed3bd"
            ],
            []
        ]
    },
    {
        "id": "d773b97.ac25d48",
        "type": "switch",
        "z": "4a06756c.fb29bc",
        "name": "",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2670,
        "y": 820,
        "wires": [
            [
                "c6fcb53c.ad68d8"
            ],
            [
                "c6fcb53c.ad68d8"
            ],
            [
                "c6fcb53c.ad68d8"
            ]
        ]
    },
    {
        "id": "c6fcb53c.ad68d8",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "08_Verabschiedung.wav",
        "allow_multiple": false,
        "x": 2890,
        "y": 820,
        "wires": [
            [
                "4b47c22f.d3746c"
            ]
        ]
    },
    {
        "id": "c562d61e.0d17a8",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Moechtest du eine Stimme hoeren?",
        "info": "",
        "x": 2160,
        "y": 780,
        "wires": []
    },
    {
        "id": "3199c064.ddabb",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "Verabschiedung",
        "info": "",
        "x": 2860,
        "y": 780,
        "wires": []
    },
    {
        "id": "f7292713.8bc008",
        "type": "inject",
        "z": "4a06756c.fb29bc",
        "name": "reset",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "9533224b.d3687"
            ]
        ]
    },
    {
        "id": "9533224b.d3687",
        "type": "change",
        "z": "4a06756c.fb29bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "recording",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "a0b31b04.6ead78",
        "type": "comment",
        "z": "4a06756c.fb29bc",
        "name": "ende des dialogs speichern",
        "info": "",
        "x": 2140,
        "y": 920,
        "wires": []
    },
    {
        "id": "4b47c22f.d3746c",
        "type": "change",
        "z": "4a06756c.fb29bc",
        "name": "",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2110,
        "y": 960,
        "wires": [
            [
                "e9e89562.3003e8"
            ]
        ]
    },
    {
        "id": "a131fc76.02f68",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2500,
        "y": 820,
        "wires": [
            [
                "d773b97.ac25d48"
            ]
        ]
    },
    {
        "id": "2e1e323f.d7290e",
        "type": "play-soundfile",
        "z": "4a06756c.fb29bc",
        "name": "",
        "directory": "113bba6b.b1a796",
        "file": "04_Zitat.wav",
        "allow_multiple": false,
        "x": 770,
        "y": 400,
        "wires": [
            [
                "c173b418.e7ca48"
            ]
        ]
    },
    {
        "id": "c173b418.e7ca48",
        "type": "delay",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 940,
        "y": 400,
        "wires": [
            [
                "2fa7c47f.b2154c"
            ]
        ]
    },
    {
        "id": "6a56d2cb.1a97bc",
        "type": "inject",
        "z": "5fecfc4e.735094",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "config",
                "v": "test",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "start",
        "payloadType": "str",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "47411968.b363c8"
            ]
        ]
    },
    {
        "id": "da351163.b21b3",
        "type": "inject",
        "z": "5fecfc4e.735094",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "stop",
        "payloadType": "str",
        "x": 130,
        "y": 240,
        "wires": [
            [
                "47411968.b363c8"
            ]
        ]
    },
    {
        "id": "e1cfc843.f838c8",
        "type": "socketio-emitter",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "audio/start",
        "message": "",
        "messageType": "str",
        "name": "",
        "x": 1610,
        "y": 580,
        "wires": []
    },
    {
        "id": "2cbfe629.961bca",
        "type": "socketio-emitter",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "audio/data",
        "message": "",
        "messageType": "str",
        "name": "",
        "x": 1610,
        "y": 700,
        "wires": []
    },
    {
        "id": "c04b67ed.1f4f28",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stop",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 640,
        "wires": [
            [
                "c6dcaad1.684688",
                "bc017afd.880258"
            ],
            [
                "83fa70f9.b2ead",
                "bc017afd.880258"
            ]
        ]
    },
    {
        "id": "83fa70f9.b2ead",
        "type": "socketio-emitter",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "audio/stop",
        "message": "",
        "messageType": "str",
        "name": "",
        "x": 1610,
        "y": 640,
        "wires": []
    },
    {
        "id": "7d153c7d.caffe4",
        "type": "socketio-listener",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "error",
        "name": "",
        "x": 150,
        "y": 400,
        "wires": [
            [
                "6ad5480f.1e0f38"
            ]
        ]
    },
    {
        "id": "4367d77b.ce6148",
        "type": "socketio-listener",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "speech/ended",
        "name": "",
        "x": 170,
        "y": 280,
        "wires": [
            [
                "476f65a4.cd9fbc"
            ]
        ]
    },
    {
        "id": "a2c2ab39.bdfb78",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.language",
                "pt": "msg",
                "to": "language",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.sampleRate",
                "pt": "msg",
                "to": "config.rate",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.timeout",
                "pt": "msg",
                "to": "timeout",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.duration",
                "pt": "msg",
                "to": "duration",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.initialWait",
                "pt": "msg",
                "to": "initialWait",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.requestId",
                "pt": "msg",
                "to": "requestId",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1420,
        "y": 580,
        "wires": [
            [
                "e1cfc843.f838c8"
            ]
        ]
    },
    {
        "id": "c57260b.2b006a",
        "type": "tools-mic",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "sampleRate": "16000",
        "channels": "2",
        "device": "hw:1",
        "endian": "little",
        "bitwidth": "16",
        "x": 800,
        "y": 680,
        "wires": [
            [
                "c04b67ed.1f4f28"
            ],
            [
                "f9f69b61.5aa078"
            ]
        ]
    },
    {
        "id": "76a206d2.e91198",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "stop",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 640,
        "wires": [
            [
                "c57260b.2b006a"
            ]
        ]
    },
    {
        "id": "7e7bd489.1b262c",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "join array & merge inputMsg",
        "func": "return {...flow.get('inputMsg'), \n    topic: msg.topic, \n    payload: Array.isArray(msg.payload) ? msg.payload.join('.') : '' \n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "3e935458.9087bc",
        "type": "status",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "scope": [
            "c57260b.2b006a"
        ],
        "x": 160,
        "y": 100,
        "wires": [
            [
                "64e74f09.ede9d"
            ]
        ]
    },
    {
        "id": "47411968.b363c8",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "5fecfc4e.735094",
        "name": "",
        "env": [
            {
                "name": "language",
                "value": "en",
                "type": "str"
            }
        ],
        "x": 410,
        "y": 220,
        "wires": [
            [
                "480e1ea2.9f4e7"
            ],
            [
                "c4ef7da4.c5232"
            ]
        ]
    },
    {
        "id": "480e1ea2.9f4e7",
        "type": "debug",
        "z": "5fecfc4e.735094",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 200,
        "wires": []
    },
    {
        "id": "9bb51859.d52808",
        "type": "status",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "scope": [
            "4367d77b.ce6148"
        ],
        "x": 160,
        "y": 160,
        "wires": [
            [
                "a6c48026.c22c4"
            ]
        ]
    },
    {
        "id": "64e74f09.ede9d",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "recordingState",
                "pt": "flow",
                "to": "status",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 100,
        "wires": [
            [
                "fe9f376.9f7dfc8"
            ]
        ]
    },
    {
        "id": "a6c48026.c22c4",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "connectionState",
                "pt": "flow",
                "to": "status",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 160,
        "wires": [
            [
                "fe9f376.9f7dfc8"
            ]
        ]
    },
    {
        "id": "fe9f376.9f7dfc8",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "set state",
        "func": "let connectionState = flow.get('connectionState')\nlet recordingState = flow.get('recordingState')\n\nif (recordingState && recordingState.text == 'recording')\n    msg.status = recordingState\nelse if (connectionState)\n    msg.status = connectionState\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 700,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "c6dcaad1.684688",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "requestId",
                "pt": "flow",
                "to": "_msgid",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1230,
        "y": 580,
        "wires": [
            [
                "a2c2ab39.bdfb78"
            ]
        ]
    },
    {
        "id": "476f65a4.cd9fbc",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "requestId",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 280,
        "wires": [
            [
                "76a206d2.e91198",
                "c9a88311.dcd78"
            ]
        ]
    },
    {
        "id": "6ad5480f.1e0f38",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "requestId",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 400,
        "wires": [
            [
                "76a206d2.e91198",
                "7c840c15.8fb4e4"
            ]
        ]
    },
    {
        "id": "c9a88311.dcd78",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.transcript",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 280,
        "wires": [
            [
                "7e7bd489.1b262c"
            ]
        ]
    },
    {
        "id": "c2e21719.6d9b38",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "5fecfc4e.735094",
        "name": "",
        "env": [],
        "x": 420,
        "y": 420,
        "wires": [
            [
                "f1595735.0c08d8"
            ],
            [
                "f1595735.0c08d8"
            ]
        ]
    },
    {
        "id": "f1595735.0c08d8",
        "type": "debug",
        "z": "5fecfc4e.735094",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 420,
        "wires": []
    },
    {
        "id": "f9f69b61.5aa078",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "stereo to mono",
        "func": "if (msg.config.channels == 1)\n    return msg\n    \nconst bytewidth = msg.config.bitwidth/8\nconst input = msg.payload\nconst output = Buffer.alloc(input.length/2)\n\nif (bytewidth == 1) {\n    for (let i=0;i<output.length;i+=1) {\n        output[i] = input[i*2];\n    }\n    msg.payload = output\n} else if (bytewidth == 2) {\n    for (let i=0;i<output.length;i+=2) {\n        output[i] = input[i*2]\n        output[i+1] = input[i*2+1]\n    }\n    msg.payload = output\n} else if (bytewidth == 3) {\n    for (let i=0;i<output.length;i+=3) {\n        output[i] = input[i*2]\n        output[i+1] = input[i*2+1]\n        output[i+2] = input[i*2+2]\n    }\n    msg.payload = output\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 700,
        "wires": [
            [
                "2cbfe629.961bca"
            ]
        ]
    },
    {
        "id": "b310527d.8bbd6",
        "type": "socketio-listener",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "speech/intermediate",
        "name": "",
        "x": 190,
        "y": 340,
        "wires": [
            [
                "44bbd6af.bbded8"
            ]
        ]
    },
    {
        "id": "7c840c15.8fb4e4",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "throw Error",
        "func": "throw new Error(Json.stringify(msg.payload.error))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 530,
        "y": 400,
        "wires": [
            [
                "304c9104.8c0aae"
            ]
        ]
    },
    {
        "id": "44bbd6af.bbded8",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "requestId",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 340,
        "wires": [
            [
                "37425a1d.e84cb6"
            ]
        ]
    },
    {
        "id": "37425a1d.e84cb6",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.text",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "6805f7b6.9d0108",
        "type": "play-soundfile",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "directory": "c531aa1.9af8558",
        "file": "beep.wav",
        "options": "",
        "allow_multiple": true,
        "x": 1580,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "6f413d3.5cfb3c4",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 440,
        "wires": [
            [
                "6805f7b6.9d0108"
            ]
        ]
    },
    {
        "id": "b427aba6.1f6c78",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "streaming audio to server, max duration is 60s",
        "info": "",
        "x": 1710,
        "y": 540,
        "wires": []
    },
    {
        "id": "fb454213.2a122",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "receiving transcript from server",
        "info": "",
        "x": 230,
        "y": 240,
        "wires": []
    },
    {
        "id": "26aa7731.a80268",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "merge connection status and recording status",
        "info": "",
        "x": 270,
        "y": 60,
        "wires": []
    },
    {
        "id": "b40ff449.9bd578",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "1",
                "type": "num"
            }
        ],
        "x": 1140,
        "y": 200,
        "wires": [
            [
                "3df70560.4cbdba"
            ],
            []
        ]
    },
    {
        "id": "cf7ca5e3.88fdb8",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "start",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "start",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 740,
        "wires": [
            [
                "fa7b2136.30901"
            ]
        ]
    },
    {
        "id": "c988bcb5.5a0be",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "stop",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "start",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 230,
        "y": 700,
        "wires": [
            [
                "c57260b.2b006a"
            ],
            [
                "cf7ca5e3.88fdb8"
            ],
            [
                "cf7ca5e3.88fdb8"
            ]
        ]
    },
    {
        "id": "5bf4f619.737b88",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [],
        "x": 2090,
        "y": 820,
        "wires": [
            [
                "55b19002.b79aa"
            ],
            []
        ]
    },
    {
        "id": "556efcb9.f91054",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "3",
                "type": "num"
            }
        ],
        "x": 660,
        "y": 540,
        "wires": [
            [
                "af386139.abee1",
                "2029792b.2b7cc6"
            ],
            []
        ]
    },
    {
        "id": "cb9ffe1.8e771",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "3",
                "type": "num"
            }
        ],
        "x": 680,
        "y": 680,
        "wires": [
            [
                "3c9c1082.eeefa",
                "3a825df2.078a82"
            ],
            []
        ]
    },
    {
        "id": "fa7b2136.30901",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "inputMsg",
                "pt": "flow",
                "to": "msg",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 740,
        "wires": [
            [
                "c57260b.2b006a"
            ]
        ]
    },
    {
        "id": "807fbbbf.dec128",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "play recording sound",
        "info": "",
        "x": 1240,
        "y": 400,
        "wires": []
    },
    {
        "id": "bc017afd.880258",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "playBeep",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 440,
        "wires": [
            [
                "6f413d3.5cfb3c4"
            ]
        ]
    },
    {
        "id": "be136e9e.9f93c",
        "type": "rpi-gpio in",
        "z": "4a06756c.fb29bc",
        "name": "",
        "pin": "16",
        "intype": "tri",
        "debounce": "25",
        "read": false,
        "x": 150,
        "y": 260,
        "wires": [
            [
                "223d2bf4.4932b4"
            ]
        ]
    },
    {
        "id": "c4ef7da4.c5232",
        "type": "say",
        "z": "5fecfc4e.735094",
        "name": "",
        "text": "",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 690,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "304c9104.8c0aae",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "c23ea50f.09e798",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 200,
        "wires": [
            [
                "440484a1.072dfc"
            ]
        ]
    },
    {
        "id": "8b94628b.0c2e9",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 260,
        "wires": []
    },
    {
        "id": "6561721e.6ce77c",
        "type": "template",
        "z": "400cca0.99e3638",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<h2>File List</h2>\n<p>Directory: <span class=\"highlight\">{{directory}}</span></p>\n<ul>\n{{#payload}}\n    <li>\n        <button onClick=\"onDeleteClicked({{index}})\">Delete</button>\n        <a href=\"/uploads/file/{{fileName}}\">{{fileName}}</a>\n    </li>\n{{/payload}}\n</ul>\n\n<h3>Upload wav file</h3>\n<form action=\"/uploads/add\" method=\"POST\" enctype=\"multipart/form-data\">\n    <input type=\"file\" name=\"myFile\" accept=\".wav\"/>\n    <input type=\"submit\" value=\"Upload\">\n</form>\n<p>Only accepts wav files.</p>\n\n<script>\n    function onDeleteClicked(index) {\n        var ok = confirm('Are you sure to delete file?')\n        if (ok)\n            fetch(\"/uploads/delete/\" + index).then((res) => {\n                location.reload()\n            })\n    }\n</script>\n\n",
        "output": "str",
        "x": 660,
        "y": 260,
        "wires": [
            [
                "12f00f00.030a11"
            ]
        ]
    },
    {
        "id": "12f00f00.030a11",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 260,
        "wires": [
            [
                "8b94628b.0c2e9"
            ]
        ]
    },
    {
        "id": "3119cc28.bf8554",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "format file array",
        "func": "msg.payload = msg.files.map((val,i) => {\n    return {\n        path: val,\n        fileName: val.replace(/^.*[\\\\\\/]/, ''),\n        index: i\n    }\n})\nmsg.directory = flow.get(\"directory\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 200,
        "wires": [
            [
                "6561721e.6ce77c"
            ]
        ]
    },
    {
        "id": "91e1411a.876ca",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads/delete/:id",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 240,
        "y": 520,
        "wires": [
            [
                "1cf89335.70009d"
            ]
        ]
    },
    {
        "id": "daa360e9.96b8e",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 1020,
        "y": 520,
        "wires": []
    },
    {
        "id": "682d3ab.6ec34c4",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads/file/:file",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 240,
        "y": 400,
        "wires": [
            [
                "6ac3f475.b5805c"
            ]
        ]
    },
    {
        "id": "87648aee.dd0818",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 400,
        "wires": []
    },
    {
        "id": "c39b4074.cccd9",
        "type": "file in",
        "z": "400cca0.99e3638",
        "name": "read file",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 640,
        "y": 400,
        "wires": [
            [
                "68e0beb4.de5f1"
            ]
        ]
    },
    {
        "id": "9ef6fd57.695b1",
        "type": "inject",
        "z": "400cca0.99e3638",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "ad6a6b77.6f2558",
                "8dfab77a.7e60d8"
            ]
        ]
    },
    {
        "id": "ad6a6b77.6f2558",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "directory",
                "pt": "flow",
                "to": "fileDirectory",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6ac3f475.b5805c",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "",
        "func": "msg.filename = `${flow.get('directory')}/${msg.req.params.file}`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 400,
        "wires": [
            [
                "c39b4074.cccd9"
            ]
        ]
    },
    {
        "id": "68e0beb4.de5f1",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "Set Headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.content-type",
                "pt": "msg",
                "to": "audio/wav",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 400,
        "wires": [
            [
                "87648aee.dd0818"
            ]
        ]
    },
    {
        "id": "440484a1.072dfc",
        "type": "fs-ops-dir",
        "z": "400cca0.99e3638",
        "name": "list files",
        "path": "directory",
        "pathType": "flow",
        "filter": "*.wav",
        "filterType": "str",
        "dir": "files",
        "dirType": "msg",
        "x": 460,
        "y": 200,
        "wires": [
            [
                "3119cc28.bf8554"
            ]
        ]
    },
    {
        "id": "e78bf516.ea7368",
        "type": "fs-ops-delete",
        "z": "400cca0.99e3638",
        "name": "",
        "path": "directory",
        "pathType": "flow",
        "filename": "file",
        "filenameType": "msg",
        "x": 850,
        "y": 520,
        "wires": [
            [
                "daa360e9.96b8e"
            ]
        ]
    },
    {
        "id": "1cf89335.70009d",
        "type": "fs-ops-dir",
        "z": "400cca0.99e3638",
        "name": "get file list",
        "path": "directory",
        "pathType": "flow",
        "filter": "*.wav",
        "filterType": "str",
        "dir": "files",
        "dirType": "msg",
        "x": 460,
        "y": 520,
        "wires": [
            [
                "19744c3a.6e3a74"
            ]
        ]
    },
    {
        "id": "19744c3a.6e3a74",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "get file from array",
        "func": "const files = msg.files || []\nmsg.file = files[msg.req.params.id]\nif (!msg.file)\n    throw new Error(\"File not found.\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 520,
        "wires": [
            [
                "e78bf516.ea7368"
            ]
        ]
    },
    {
        "id": "e2c614c.3f3d5e8",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "e78bf516.ea7368",
            "1cf89335.70009d",
            "19744c3a.6e3a74"
        ],
        "uncaught": false,
        "x": 450,
        "y": 560,
        "wires": [
            [
                "cec7ef19.0966b"
            ]
        ]
    },
    {
        "id": "e199c87d.f4d148",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 560,
        "wires": []
    },
    {
        "id": "b678cddc.95212",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "List Files",
        "info": "",
        "x": 200,
        "y": 160,
        "wires": []
    },
    {
        "id": "322df236.ba450e",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "Serve files for listening",
        "info": "",
        "x": 240,
        "y": 360,
        "wires": []
    },
    {
        "id": "b5321508.9f6078",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "Delete File",
        "info": "",
        "x": 200,
        "y": 480,
        "wires": []
    },
    {
        "id": "835dc718.c50478",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "x": 1010,
        "y": 740,
        "wires": []
    },
    {
        "id": "62acfd9.5955d04",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads/add",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 230,
        "y": 680,
        "wires": [
            [
                "5f1057c4.da6538"
            ]
        ]
    },
    {
        "id": "bb267c7c.e7458",
        "type": "template",
        "z": "400cca0.99e3638",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<p>File {{name}} has been uploaded.</p>\n\n<a href=\"/uploads\">Go back</a>",
        "output": "str",
        "x": 680,
        "y": 740,
        "wires": [
            [
                "bb3e3632.6db608"
            ]
        ]
    },
    {
        "id": "5f1057c4.da6538",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "remove special chars in filename",
        "func": "\n\nconst file = msg.req.files[0]\nmsg.name = file.originalname.replace(/[\\\\/:\\\"*?<>\\s|]+/g,\"\")\nmsg.filename = `${flow.get(\"directory\")}/${msg.name}`\nmsg.payload = file.buffer\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 680,
        "wires": [
            [
                "c2fd8d8.8ba497"
            ]
        ]
    },
    {
        "id": "6f9f99fb.a080a8",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "440484a1.072dfc"
        ],
        "uncaught": false,
        "x": 470,
        "y": 300,
        "wires": [
            [
                "e1629cd2.60fe3"
            ]
        ]
    },
    {
        "id": "6e1586fa.2abc08",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 300,
        "wires": []
    },
    {
        "id": "c2fd8d8.8ba497",
        "type": "file",
        "z": "400cca0.99e3638",
        "name": "write file",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 740,
        "y": 680,
        "wires": [
            [
                "bb267c7c.e7458"
            ]
        ]
    },
    {
        "id": "421f4e20.0508c",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "5f1057c4.da6538",
            "c2fd8d8.8ba497"
        ],
        "uncaught": false,
        "x": 410,
        "y": 780,
        "wires": [
            [
                "82c8be74.922a"
            ]
        ]
    },
    {
        "id": "b86a156e.dd5bc8",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 780,
        "wires": []
    },
    {
        "id": "c5a93e32.273eb",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "c39b4074.cccd9"
        ],
        "uncaught": false,
        "x": 470,
        "y": 440,
        "wires": [
            [
                "3379728d.d5013e"
            ]
        ]
    },
    {
        "id": "42db5b35.ede624",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 440,
        "wires": []
    },
    {
        "id": "82c8be74.922a",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 780,
        "wires": [
            [
                "3083aeb9.7846d2"
            ]
        ]
    },
    {
        "id": "cec7ef19.0966b",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 560,
        "wires": [
            [
                "5e342e72.2e6d9"
            ]
        ]
    },
    {
        "id": "3379728d.d5013e",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 440,
        "wires": [
            [
                "7fab115f.9df48"
            ]
        ]
    },
    {
        "id": "e1629cd2.60fe3",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 300,
        "wires": [
            [
                "82edd856.261c78"
            ]
        ]
    },
    {
        "id": "843a45d8.f111e8",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "Upload File",
        "info": "",
        "x": 210,
        "y": 640,
        "wires": []
    },
    {
        "id": "3701e7bf.7951b8",
        "type": "subflow:400cca0.99e3638",
        "z": "965f4c84.d4613",
        "name": "",
        "env": [
            {
                "name": "fileDirectory",
                "value": "/Users/lutz/Desktop/futurium-dialog/rebecca 2",
                "type": "str"
            }
        ],
        "x": 150,
        "y": 120,
        "wires": []
    },
    {
        "id": "b6b9f4e.ee87c08",
        "type": "comment",
        "z": "965f4c84.d4613",
        "name": "This node enables the file uploader. ",
        "info": "reachable at [http://:server:/uploads](/uploads). You should only use a single instance of this node.",
        "x": 200,
        "y": 80,
        "wires": []
    },
    {
        "id": "8dfab77a.7e60d8",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "define HTML Template",
        "func": "const htmlTemplate = function(payload) {\n    return(\n    `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>File Uploader</title>\n        <style>\n            body {\n              background-color: linen;\n              font-family: monospace;\n            }\n            \n            input, button {\n                font-family: monospace;\n            }\n            \n            .content {\n                max-width: 500px;\n                margin: 0 auto;\n                padding: 5px;\n            }\n            \n            h2 {\n              border-bottom: 1px solid black;\n            }\n            \n            ul {\n                list-style: none;\n                margin: 0;\n                padding: 0;\n            }\n            \n            li {\n                padding: 5px 0;\n                white-space: nowrap;\n            }\n            \n            li > button {\n                float: right;\n            }\n            \n            form {\n                border: 1px solid black;\n                padding: 10px;\n                text-align: center;\n            }\n            \n            .highlight {\n                background: #ffffff99;\n            }\n            \n        </style>\n      </head>\n      <body>\n        <div class=\"content\">\n        ${payload}\n        </div>\n      </body>\n    </html>\n    `)  \n}\nflow.set('htmlTemplate', htmlTemplate)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 420,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "bb3e3632.6db608",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 740,
        "wires": [
            [
                "835dc718.c50478"
            ]
        ]
    },
    {
        "id": "3083aeb9.7846d2",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 780,
        "wires": [
            [
                "b86a156e.dd5bc8"
            ]
        ]
    },
    {
        "id": "7fab115f.9df48",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 440,
        "wires": [
            [
                "42db5b35.ede624"
            ]
        ]
    },
    {
        "id": "5e342e72.2e6d9",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 560,
        "wires": [
            [
                "e199c87d.f4d148"
            ]
        ]
    },
    {
        "id": "82edd856.261c78",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 300,
        "wires": [
            [
                "6e1586fa.2abc08"
            ]
        ]
    },
    {
        "id": "258422f1.019dde",
        "type": "file",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "utf8",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "42a63d67.d4def4",
                "8d8a43e9.27f7d"
            ]
        ]
    },
    {
        "id": "6ada7437.e15d1c",
        "type": "catch",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 400,
        "y": 160,
        "wires": [
            [
                "9aabf298.0b56e"
            ]
        ]
    },
    {
        "id": "4d41ee73.24003",
        "type": "function",
        "z": "aaf06e2c.e5b2f",
        "name": "format line",
        "func": "msg.payload = {\n    time: Date.now(),\n    value: msg.payload,\n    topic: env.get('topic') || msg.topic\n}\nmsg.filename = env.get('filepath')\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "258422f1.019dde"
            ]
        ]
    },
    {
        "id": "42a63d67.d4def4",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "status saved",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"saved\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "8d8a43e9.27f7d",
        "type": "delay",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 560,
        "y": 120,
        "wires": [
            [
                "4ae4daed.2d7f54"
            ]
        ]
    },
    {
        "id": "4ae4daed.2d7f54",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "clear",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "9aabf298.0b56e",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "status saved",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "44409dca.4c5454",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/Users/lutz/Desktop/futurium-dialog/answers.txt",
                "type": "str"
            },
            {
                "name": "topic",
                "value": "datenschutz",
                "type": "str"
            }
        ],
        "x": 1590,
        "y": 140,
        "wires": []
    },
    {
        "id": "2029792b.2b7cc6",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/Users/lutz/Desktop/futurium-dialog/answers.txt",
                "type": "str"
            },
            {
                "name": "topic",
                "value": "meinung",
                "type": "str"
            }
        ],
        "x": 870,
        "y": 480,
        "wires": []
    },
    {
        "id": "3a825df2.078a82",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/Users/lutz/Desktop/futurium-dialog/answers.txt",
                "type": "str"
            },
            {
                "name": "topic",
                "value": "engagiert",
                "type": "str"
            }
        ],
        "x": 910,
        "y": 620,
        "wires": []
    },
    {
        "id": "61641ef2.ed3bd",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/Users/lutz/Desktop/futurium-dialog/answers.txt",
                "type": "str"
            },
            {
                "name": "topic",
                "value": "mehr",
                "type": "str"
            }
        ],
        "x": 2530,
        "y": 740,
        "wires": []
    },
    {
        "id": "e9e89562.3003e8",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/Users/lutz/Desktop/futurium-dialog/answers.txt",
                "type": "str"
            },
            {
                "name": "topic",
                "value": "end",
                "type": "str"
            }
        ],
        "x": 2330,
        "y": 960,
        "wires": []
    },
    {
        "id": "df0ab0a.fd2525",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "4a06756c.fb29bc",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/Users/lutz/Desktop/futurium-dialog/answers.txt",
                "type": "str"
            },
            {
                "name": "topic",
                "value": "start",
                "type": "str"
            }
        ],
        "x": 630,
        "y": 240,
        "wires": []
    }
]