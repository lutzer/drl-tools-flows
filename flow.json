[
    {
        "id": "5fecfc4e.735094",
        "type": "tab",
        "label": "Test",
        "disabled": false,
        "info": ""
    },
    {
        "id": "965f4c84.d4613",
        "type": "tab",
        "label": "Main",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1c156992.8e395e",
        "type": "tab",
        "label": "Example: Museum",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5588b46c.506a2c",
        "type": "tab",
        "label": "Dialog Nodes",
        "disabled": true,
        "info": ""
    },
    {
        "id": "a22a1db7.e3ac9",
        "type": "tab",
        "label": "Dialog Components",
        "disabled": true,
        "info": ""
    },
    {
        "id": "d9115fe7.1fc6d",
        "type": "subflow",
        "name": "qs-speech-to-text",
        "info": "",
        "category": "quasselstrippe",
        "in": [
            {
                "x": 140,
                "y": 700,
                "wires": [
                    {
                        "id": "c988bcb5.5a0be"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1320,
                "y": 280,
                "wires": [
                    {
                        "id": "4343e92e.1ad378",
                        "port": 1
                    },
                    {
                        "id": "28142bbd.a6e2a4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1320,
                "y": 340,
                "wires": [
                    {
                        "id": "37425a1d.e84cb6",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "language",
                "type": "str",
                "value": "de",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            },
            {
                "name": "timeout",
                "type": "num",
                "value": "2",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            },
            {
                "name": "initialWait",
                "type": "num",
                "value": "10",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            },
            {
                "name": "duration",
                "type": "num",
                "value": "60",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            },
            {
                "name": "playBeep",
                "type": "bool",
                "value": "true",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "bool"
                        ]
                    }
                }
            }
        ],
        "color": "#FFAAAA",
        "outputLabels": [
            "transcript",
            "intermediate"
        ],
        "icon": "font-awesome/fa-microphone",
        "status": {
            "x": 980,
            "y": 120,
            "wires": [
                {
                    "id": "fe9f376.9f7dfc8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "400cca0.99e3638",
        "type": "subflow",
        "name": "qs-file-uploader",
        "info": "This node needs to be in an active flow to enable the upload web interface: [Link](/uploads).\nOnly one instance of this node should be active at a time.\n",
        "category": "quasselstrippe",
        "in": [],
        "out": [],
        "env": [
            {
                "name": "fileDirectory",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            }
        ],
        "color": "#C0DEED",
        "icon": "font-awesome/fa-upload"
    },
    {
        "id": "aaf06e2c.e5b2f",
        "type": "subflow",
        "name": "qs-save-output",
        "info": "",
        "category": "quasselstrippe",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "c88a441f.6fd848"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1240,
                "y": 80,
                "wires": [
                    {
                        "id": "c88a441f.6fd848",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "writeFile",
                "type": "bool",
                "value": "true",
                "ui": {
                    "label": {
                        "en-US": "Write to file"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "filepath",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            }
        ],
        "color": "#FFAAAA",
        "icon": "font-awesome/fa-save",
        "status": {
            "x": 1240,
            "y": 220,
            "wires": [
                {
                    "id": "42a63d67.d4def4",
                    "port": 0
                },
                {
                    "id": "4ae4daed.2d7f54",
                    "port": 0
                },
                {
                    "id": "9aabf298.0b56e",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "6096a378.7f109c",
        "type": "subflow",
        "name": "qs-serve-output-file",
        "info": "",
        "category": "quasselstrippe",
        "in": [],
        "out": [],
        "env": [
            {
                "name": "filepath",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            }
        ],
        "color": "#C0DEED",
        "icon": "node-red/parser-json.svg"
    },
    {
        "id": "7c973ed1.90f49",
        "type": "subflow",
        "name": "qs-output",
        "info": "",
        "category": "quasselstrippe",
        "in": [
            {
                "x": 120,
                "y": 120,
                "wires": [
                    {
                        "id": "3a34652d.80236a"
                    }
                ]
            }
        ],
        "out": [],
        "env": [
            {
                "name": "operation",
                "type": "str",
                "value": "append",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "new"
                                },
                                "v": "new"
                            },
                            {
                                "l": {
                                    "en-US": "append"
                                },
                                "v": "append"
                            }
                        ]
                    }
                }
            },
            {
                "name": "topic",
                "type": "str",
                "value": "",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            }
        ],
        "color": "#FFAAAA",
        "icon": "font-awesome/fa-save",
        "status": {
            "x": 740,
            "y": 200,
            "wires": [
                {
                    "id": "71f0a300.24c17c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "5e5de4d5.8fa87c",
        "type": "subflow",
        "name": "qs-button",
        "info": "",
        "category": "quasselstrippe",
        "in": [],
        "out": [
            {
                "x": 1200,
                "y": 160,
                "wires": [
                    {
                        "id": "4b01ce17.c62e5",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#FFAAAA",
        "outputLabels": [
            "pressed"
        ],
        "status": {
            "x": 1200,
            "y": 340,
            "wires": [
                {
                    "id": "7587a0a4.521ec",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e32847a.070d9b8",
        "type": "subflow",
        "name": "qs-dialog-ended",
        "info": "",
        "category": "quasselstrippe",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "8fde2bde.1d61e8"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#FFAAAA",
        "icon": "font-awesome/fa-check-circle"
    },
    {
        "id": "6f60f9a7.d36138",
        "type": "subflow",
        "name": "qs-button-led",
        "info": "",
        "category": "quasselstrippe",
        "in": [
            {
                "x": 100,
                "y": 200,
                "wires": [
                    {
                        "id": "5676721e.95feac"
                    }
                ]
            }
        ],
        "out": [],
        "env": [
            {
                "name": "blink",
                "type": "bool",
                "value": "true",
                "ui": {
                    "type": "checkbox"
                }
            },
            {
                "name": "rate",
                "type": "num",
                "value": "500",
                "ui": {
                    "type": "input",
                    "opts": {
                        "types": [
                            "num"
                        ]
                    }
                }
            }
        ],
        "color": "#FFAAAA",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 1340,
            "y": 540,
            "wires": [
                {
                    "id": "e9feaec2.ff23",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c531aa1.9af8558",
        "type": "soundfile-directory",
        "directory": "sounds"
    },
    {
        "id": "cfbb12ea.54ab9",
        "type": "socketio-config",
        "uri": "http://tools.drlab.org",
        "options": "{ \"forceNew\": true }"
    },
    {
        "id": "bbacc559.40a508",
        "type": "soundfile-directory",
        "directory": "/home/pi/sounds/"
    },
    {
        "id": "e1cfc843.f838c8",
        "type": "socketio-emitter",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "audio/start",
        "message": "",
        "messageType": "str",
        "name": "",
        "x": 2110,
        "y": 580,
        "wires": []
    },
    {
        "id": "2cbfe629.961bca",
        "type": "socketio-emitter",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "audio/data",
        "message": "",
        "messageType": "str",
        "name": "",
        "x": 2110,
        "y": 700,
        "wires": []
    },
    {
        "id": "c04b67ed.1f4f28",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stop",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 640,
        "wires": [
            [
                "c6dcaad1.684688",
                "bc017afd.880258",
                "9f6a6701.28d048"
            ],
            [
                "c4fb46be.b8f9f8",
                "83fa70f9.b2ead",
                "bc017afd.880258"
            ]
        ]
    },
    {
        "id": "83fa70f9.b2ead",
        "type": "socketio-emitter",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "audio/stop",
        "message": "",
        "messageType": "str",
        "name": "",
        "x": 2110,
        "y": 640,
        "wires": []
    },
    {
        "id": "7d153c7d.caffe4",
        "type": "socketio-listener",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "error",
        "name": "",
        "x": 150,
        "y": 400,
        "wires": [
            [
                "6ad5480f.1e0f38"
            ]
        ]
    },
    {
        "id": "4367d77b.ce6148",
        "type": "socketio-listener",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "speech/ended",
        "name": "",
        "x": 170,
        "y": 280,
        "wires": [
            [
                "476f65a4.cd9fbc"
            ]
        ]
    },
    {
        "id": "a2c2ab39.bdfb78",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.language",
                "pt": "msg",
                "to": "language",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.sampleRate",
                "pt": "msg",
                "to": "config.rate",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.timeout",
                "pt": "msg",
                "to": "timeout",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.duration",
                "pt": "msg",
                "to": "duration",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.initialWait",
                "pt": "msg",
                "to": "initialWait",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload.requestId",
                "pt": "msg",
                "to": "requestId",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920,
        "y": 580,
        "wires": [
            [
                "e1cfc843.f838c8"
            ]
        ]
    },
    {
        "id": "c57260b.2b006a",
        "type": "tools-mic",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "sampleRate": "16000",
        "channels": "2",
        "device": "hw:1",
        "endian": "little",
        "bitwidth": "16",
        "x": 800,
        "y": 680,
        "wires": [
            [
                "c04b67ed.1f4f28"
            ],
            [
                "f9f69b61.5aa078"
            ]
        ]
    },
    {
        "id": "76a206d2.e91198",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "stop",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 640,
        "wires": [
            [
                "c57260b.2b006a"
            ]
        ]
    },
    {
        "id": "7e7bd489.1b262c",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "join array & merge inputMsg",
        "func": "return {...flow.get('inputMsg'), \n    topic: msg.topic, \n    payload: Array.isArray(msg.payload) ? msg.payload.join('.') : '' \n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 780,
        "y": 280,
        "wires": [
            [
                "4343e92e.1ad378"
            ]
        ]
    },
    {
        "id": "3e935458.9087bc",
        "type": "status",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "scope": [
            "c57260b.2b006a"
        ],
        "x": 160,
        "y": 100,
        "wires": [
            [
                "64e74f09.ede9d"
            ]
        ]
    },
    {
        "id": "9bb51859.d52808",
        "type": "status",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "scope": [
            "4367d77b.ce6148"
        ],
        "x": 160,
        "y": 160,
        "wires": [
            [
                "a6c48026.c22c4"
            ]
        ]
    },
    {
        "id": "64e74f09.ede9d",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "recordingState",
                "pt": "flow",
                "to": "status",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 100,
        "wires": [
            [
                "fe9f376.9f7dfc8"
            ]
        ]
    },
    {
        "id": "a6c48026.c22c4",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "connectionState",
                "pt": "flow",
                "to": "status",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 160,
        "wires": [
            [
                "fe9f376.9f7dfc8"
            ]
        ]
    },
    {
        "id": "fe9f376.9f7dfc8",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "set state",
        "func": "let connectionState = flow.get('connectionState')\nlet recordingState = flow.get('recordingState')\n\nif (recordingState && recordingState.text == 'recording')\n    msg.status = recordingState\nelse if (connectionState)\n    msg.status = connectionState\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 700,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "c6dcaad1.684688",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "requestId",
                "pt": "flow",
                "to": "_msgid",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 580,
        "wires": [
            [
                "a2c2ab39.bdfb78"
            ]
        ]
    },
    {
        "id": "476f65a4.cd9fbc",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "requestId",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 280,
        "wires": [
            [
                "76a206d2.e91198",
                "c9a88311.dcd78"
            ]
        ]
    },
    {
        "id": "6ad5480f.1e0f38",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "requestId",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 400,
        "wires": [
            [
                "76a206d2.e91198",
                "7c840c15.8fb4e4"
            ]
        ]
    },
    {
        "id": "c9a88311.dcd78",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.transcript",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 280,
        "wires": [
            [
                "7e7bd489.1b262c"
            ]
        ]
    },
    {
        "id": "f9f69b61.5aa078",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "stereo to mono",
        "func": "if (msg.config.channels == 1)\n    return msg\n    \nconst bytewidth = msg.config.bitwidth/8\nconst input = msg.payload\nconst output = Buffer.alloc(input.length/2)\n\nif (bytewidth == 1) {\n    for (let i=0;i<output.length;i+=1) {\n        output[i] = input[i*2];\n    }\n    msg.payload = output\n} else if (bytewidth == 2) {\n    for (let i=0;i<output.length;i+=2) {\n        output[i] = input[i*2]\n        output[i+1] = input[i*2+1]\n    }\n    msg.payload = output\n} else if (bytewidth == 3) {\n    for (let i=0;i<output.length;i+=3) {\n        output[i] = input[i*2]\n        output[i+1] = input[i*2+1]\n        output[i+2] = input[i*2+2]\n    }\n    msg.payload = output\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 700,
        "wires": [
            [
                "2cbfe629.961bca"
            ]
        ]
    },
    {
        "id": "b310527d.8bbd6",
        "type": "socketio-listener",
        "z": "d9115fe7.1fc6d",
        "server": "cfbb12ea.54ab9",
        "eventname": "speech/intermediate",
        "name": "",
        "x": 190,
        "y": 340,
        "wires": [
            [
                "44bbd6af.bbded8"
            ]
        ]
    },
    {
        "id": "7c840c15.8fb4e4",
        "type": "function",
        "z": "d9115fe7.1fc6d",
        "name": "throw Error",
        "func": "throw new Error(JSON.stringify(msg.payload.error))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 530,
        "y": 400,
        "wires": [
            [
                "304c9104.8c0aae"
            ]
        ]
    },
    {
        "id": "44bbd6af.bbded8",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "requestId",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 340,
        "wires": [
            [
                "37425a1d.e84cb6"
            ]
        ]
    },
    {
        "id": "37425a1d.e84cb6",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.text",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "6805f7b6.9d0108",
        "type": "play-soundfile",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "directory": "c531aa1.9af8558",
        "file": "beep.wav",
        "allow_multiple": true,
        "x": 2080,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "6f413d3.5cfb3c4",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 440,
        "wires": [
            [
                "6805f7b6.9d0108"
            ]
        ]
    },
    {
        "id": "b427aba6.1f6c78",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "streaming audio to server, max duration is 60s",
        "info": "",
        "x": 2210,
        "y": 540,
        "wires": []
    },
    {
        "id": "fb454213.2a122",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "receiving transcript from server",
        "info": "",
        "x": 230,
        "y": 240,
        "wires": []
    },
    {
        "id": "26aa7731.a80268",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "merge connection status and recording status",
        "info": "",
        "x": 270,
        "y": 60,
        "wires": []
    },
    {
        "id": "cf7ca5e3.88fdb8",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "start",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "start",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 740,
        "wires": [
            [
                "fa7b2136.30901"
            ]
        ]
    },
    {
        "id": "c988bcb5.5a0be",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "stop",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "start",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 230,
        "y": 700,
        "wires": [
            [
                "c57260b.2b006a"
            ],
            [
                "cf7ca5e3.88fdb8"
            ],
            [
                "cf7ca5e3.88fdb8"
            ]
        ]
    },
    {
        "id": "fa7b2136.30901",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "inputMsg",
                "pt": "flow",
                "to": "msg",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 740,
        "wires": [
            [
                "c57260b.2b006a"
            ]
        ]
    },
    {
        "id": "807fbbbf.dec128",
        "type": "comment",
        "z": "d9115fe7.1fc6d",
        "name": "play recording sound",
        "info": "",
        "x": 1740,
        "y": 400,
        "wires": []
    },
    {
        "id": "bc017afd.880258",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "playBeep",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1690,
        "y": 440,
        "wires": [
            [
                "6f413d3.5cfb3c4"
            ]
        ]
    },
    {
        "id": "304c9104.8c0aae",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 400,
        "wires": [
            [
                "4343e92e.1ad378"
            ]
        ]
    },
    {
        "id": "c23ea50f.09e798",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 200,
        "wires": [
            [
                "440484a1.072dfc"
            ]
        ]
    },
    {
        "id": "8b94628b.0c2e9",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 260,
        "wires": []
    },
    {
        "id": "6561721e.6ce77c",
        "type": "template",
        "z": "400cca0.99e3638",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<h2>File List</h2>\n<p>Directory: <span class=\"highlight\">{{directory}}</span></p>\n<ul>\n{{#payload}}\n    <li>\n        <button onClick=\"onDeleteClicked({{index}})\">Delete</button>\n        <a href=\"/uploads/file/{{fileName}}\">{{fileName}}</a>\n    </li>\n{{/payload}}\n</ul>\n\n<h3>Upload wav file</h3>\n<form action=\"/uploads/add\" method=\"POST\" enctype=\"multipart/form-data\">\n    <input type=\"file\" name=\"myFile\" accept=\".wav\"/>\n    <input type=\"submit\" value=\"Upload\">\n</form>\n<p>Only accepts wav files.</p>\n\n<script>\n    function onDeleteClicked(index) {\n        var ok = confirm('Are you sure to delete file?')\n        if (ok)\n            fetch(\"/uploads/delete/\" + index).then((res) => {\n                location.reload()\n            })\n    }\n</script>\n\n",
        "output": "str",
        "x": 660,
        "y": 260,
        "wires": [
            [
                "12f00f00.030a11"
            ]
        ]
    },
    {
        "id": "12f00f00.030a11",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 260,
        "wires": [
            [
                "8b94628b.0c2e9"
            ]
        ]
    },
    {
        "id": "3119cc28.bf8554",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "format file array",
        "func": "msg.payload = msg.files.map((val,i) => {\n    return {\n        path: val,\n        fileName: val.replace(/^.*[\\\\\\/]/, ''),\n        index: i\n    }\n})\nmsg.directory = flow.get(\"directory\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 200,
        "wires": [
            [
                "6561721e.6ce77c"
            ]
        ]
    },
    {
        "id": "91e1411a.876ca",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads/delete/:id",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 240,
        "y": 520,
        "wires": [
            [
                "1cf89335.70009d"
            ]
        ]
    },
    {
        "id": "daa360e9.96b8e",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 1020,
        "y": 520,
        "wires": []
    },
    {
        "id": "682d3ab.6ec34c4",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads/file/:file",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 240,
        "y": 400,
        "wires": [
            [
                "6ac3f475.b5805c"
            ]
        ]
    },
    {
        "id": "87648aee.dd0818",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 400,
        "wires": []
    },
    {
        "id": "c39b4074.cccd9",
        "type": "file in",
        "z": "400cca0.99e3638",
        "name": "read file",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 640,
        "y": 400,
        "wires": [
            [
                "68e0beb4.de5f1"
            ]
        ]
    },
    {
        "id": "9ef6fd57.695b1",
        "type": "inject",
        "z": "400cca0.99e3638",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "ad6a6b77.6f2558",
                "8dfab77a.7e60d8"
            ]
        ]
    },
    {
        "id": "ad6a6b77.6f2558",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "directory",
                "pt": "flow",
                "to": "fileDirectory",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6ac3f475.b5805c",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "",
        "func": "msg.filename = `${flow.get('directory')}/${msg.req.params.file}`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 400,
        "wires": [
            [
                "c39b4074.cccd9"
            ]
        ]
    },
    {
        "id": "68e0beb4.de5f1",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "Set Headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.content-type",
                "pt": "msg",
                "to": "audio/wav",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 400,
        "wires": [
            [
                "87648aee.dd0818"
            ]
        ]
    },
    {
        "id": "440484a1.072dfc",
        "type": "fs-ops-dir",
        "z": "400cca0.99e3638",
        "name": "list files",
        "path": "directory",
        "pathType": "flow",
        "filter": "*.wav",
        "filterType": "str",
        "dir": "files",
        "dirType": "msg",
        "x": 460,
        "y": 200,
        "wires": [
            [
                "3119cc28.bf8554"
            ]
        ]
    },
    {
        "id": "e78bf516.ea7368",
        "type": "fs-ops-delete",
        "z": "400cca0.99e3638",
        "name": "",
        "path": "directory",
        "pathType": "flow",
        "filename": "file",
        "filenameType": "msg",
        "x": 850,
        "y": 520,
        "wires": [
            [
                "daa360e9.96b8e"
            ]
        ]
    },
    {
        "id": "1cf89335.70009d",
        "type": "fs-ops-dir",
        "z": "400cca0.99e3638",
        "name": "get file list",
        "path": "directory",
        "pathType": "flow",
        "filter": "*.wav",
        "filterType": "str",
        "dir": "files",
        "dirType": "msg",
        "x": 460,
        "y": 520,
        "wires": [
            [
                "19744c3a.6e3a74"
            ]
        ]
    },
    {
        "id": "19744c3a.6e3a74",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "get file from array",
        "func": "const files = msg.files || []\nmsg.file = files[msg.req.params.id]\nif (!msg.file)\n    throw new Error(\"File not found.\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 520,
        "wires": [
            [
                "e78bf516.ea7368"
            ]
        ]
    },
    {
        "id": "e2c614c.3f3d5e8",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "e78bf516.ea7368",
            "1cf89335.70009d",
            "19744c3a.6e3a74"
        ],
        "uncaught": false,
        "x": 450,
        "y": 560,
        "wires": [
            [
                "cec7ef19.0966b"
            ]
        ]
    },
    {
        "id": "e199c87d.f4d148",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 560,
        "wires": []
    },
    {
        "id": "b678cddc.95212",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "List Files",
        "info": "",
        "x": 200,
        "y": 160,
        "wires": []
    },
    {
        "id": "322df236.ba450e",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "Serve files for listening",
        "info": "",
        "x": 240,
        "y": 360,
        "wires": []
    },
    {
        "id": "b5321508.9f6078",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "Delete File",
        "info": "",
        "x": 200,
        "y": 480,
        "wires": []
    },
    {
        "id": "835dc718.c50478",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "x": 1010,
        "y": 740,
        "wires": []
    },
    {
        "id": "62acfd9.5955d04",
        "type": "http in",
        "z": "400cca0.99e3638",
        "name": "",
        "url": "/uploads/add",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 230,
        "y": 680,
        "wires": [
            [
                "5f1057c4.da6538"
            ]
        ]
    },
    {
        "id": "bb267c7c.e7458",
        "type": "template",
        "z": "400cca0.99e3638",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<p>File {{name}} has been uploaded.</p>\n\n<a href=\"/uploads\">Go back</a>",
        "output": "str",
        "x": 680,
        "y": 740,
        "wires": [
            [
                "bb3e3632.6db608"
            ]
        ]
    },
    {
        "id": "5f1057c4.da6538",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "remove special chars in filename",
        "func": "\n\nconst file = msg.req.files[0]\nmsg.name = file.originalname.replace(/[\\\\/:\\\"*?<>\\s|]+/g,\"\")\nmsg.filename = `${flow.get(\"directory\")}/${msg.name}`\nmsg.payload = file.buffer\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 680,
        "wires": [
            [
                "c2fd8d8.8ba497"
            ]
        ]
    },
    {
        "id": "6f9f99fb.a080a8",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "440484a1.072dfc"
        ],
        "uncaught": false,
        "x": 470,
        "y": 300,
        "wires": [
            [
                "e1629cd2.60fe3"
            ]
        ]
    },
    {
        "id": "6e1586fa.2abc08",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 300,
        "wires": []
    },
    {
        "id": "c2fd8d8.8ba497",
        "type": "file",
        "z": "400cca0.99e3638",
        "name": "write file",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 740,
        "y": 680,
        "wires": [
            [
                "bb267c7c.e7458"
            ]
        ]
    },
    {
        "id": "421f4e20.0508c",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "5f1057c4.da6538",
            "c2fd8d8.8ba497"
        ],
        "uncaught": false,
        "x": 410,
        "y": 780,
        "wires": [
            [
                "82c8be74.922a"
            ]
        ]
    },
    {
        "id": "b86a156e.dd5bc8",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 780,
        "wires": []
    },
    {
        "id": "c5a93e32.273eb",
        "type": "catch",
        "z": "400cca0.99e3638",
        "name": "",
        "scope": [
            "c39b4074.cccd9"
        ],
        "uncaught": false,
        "x": 470,
        "y": 440,
        "wires": [
            [
                "3379728d.d5013e"
            ]
        ]
    },
    {
        "id": "42db5b35.ede624",
        "type": "http response",
        "z": "400cca0.99e3638",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1020,
        "y": 440,
        "wires": []
    },
    {
        "id": "82c8be74.922a",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 780,
        "wires": [
            [
                "3083aeb9.7846d2"
            ]
        ]
    },
    {
        "id": "cec7ef19.0966b",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 560,
        "wires": [
            [
                "5e342e72.2e6d9"
            ]
        ]
    },
    {
        "id": "3379728d.d5013e",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 440,
        "wires": [
            [
                "7fab115f.9df48"
            ]
        ]
    },
    {
        "id": "e1629cd2.60fe3",
        "type": "change",
        "z": "400cca0.99e3638",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 300,
        "wires": [
            [
                "82edd856.261c78"
            ]
        ]
    },
    {
        "id": "843a45d8.f111e8",
        "type": "comment",
        "z": "400cca0.99e3638",
        "name": "Upload File",
        "info": "",
        "x": 210,
        "y": 640,
        "wires": []
    },
    {
        "id": "3701e7bf.7951b8",
        "type": "subflow:400cca0.99e3638",
        "z": "965f4c84.d4613",
        "name": "",
        "env": [
            {
                "name": "fileDirectory",
                "value": "/home/pi/sounds",
                "type": "str"
            }
        ],
        "x": 150,
        "y": 140,
        "wires": []
    },
    {
        "id": "b6b9f4e.ee87c08",
        "type": "comment",
        "z": "965f4c84.d4613",
        "name": "This node enables the file uploader. ",
        "info": "reachable at [http://:server:/uploads](/uploads). You should only use a single instance of this node.",
        "x": 200,
        "y": 100,
        "wires": []
    },
    {
        "id": "8dfab77a.7e60d8",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "define HTML Template",
        "func": "const htmlTemplate = function(payload) {\n    return(\n    `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>File Uploader</title>\n        <style>\n            body {\n              background-color: linen;\n              font-family: monospace;\n            }\n            \n            input, button {\n                font-family: monospace;\n            }\n            \n            .content {\n                max-width: 500px;\n                margin: 0 auto;\n                padding: 5px;\n            }\n            \n            h2 {\n              border-bottom: 1px solid black;\n            }\n            \n            ul {\n                list-style: none;\n                margin: 0;\n                padding: 0;\n            }\n            \n            li {\n                padding: 5px 0;\n                white-space: nowrap;\n            }\n            \n            li > button {\n                float: right;\n            }\n            \n            form {\n                border: 1px solid black;\n                padding: 10px;\n                text-align: center;\n            }\n            \n            .highlight {\n                background: #ffffff99;\n            }\n            \n        </style>\n      </head>\n      <body>\n        <div class=\"content\">\n        ${payload}\n        </div>\n      </body>\n    </html>\n    `)  \n}\nflow.set('htmlTemplate', htmlTemplate)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 420,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "bb3e3632.6db608",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 740,
        "wires": [
            [
                "835dc718.c50478"
            ]
        ]
    },
    {
        "id": "3083aeb9.7846d2",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 780,
        "wires": [
            [
                "b86a156e.dd5bc8"
            ]
        ]
    },
    {
        "id": "7fab115f.9df48",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 440,
        "wires": [
            [
                "42db5b35.ede624"
            ]
        ]
    },
    {
        "id": "5e342e72.2e6d9",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 560,
        "wires": [
            [
                "e199c87d.f4d148"
            ]
        ]
    },
    {
        "id": "82edd856.261c78",
        "type": "function",
        "z": "400cca0.99e3638",
        "name": "html template",
        "func": "const htmlTemplate = flow.get('htmlTemplate')\nmsg.payload = htmlTemplate(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 300,
        "wires": [
            [
                "6e1586fa.2abc08"
            ]
        ]
    },
    {
        "id": "258422f1.019dde",
        "type": "file",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "utf8",
        "x": 730,
        "y": 140,
        "wires": [
            [
                "42a63d67.d4def4",
                "8d8a43e9.27f7d"
            ]
        ]
    },
    {
        "id": "6ada7437.e15d1c",
        "type": "catch",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 740,
        "y": 260,
        "wires": [
            [
                "9aabf298.0b56e"
            ]
        ]
    },
    {
        "id": "42a63d67.d4def4",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "status saved",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"green\",\"shape\":\"dot\",\"text\":\"saved\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "8d8a43e9.27f7d",
        "type": "delay",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 920,
        "y": 220,
        "wires": [
            [
                "4ae4daed.2d7f54"
            ]
        ]
    },
    {
        "id": "4ae4daed.2d7f54",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "clear",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "9aabf298.0b56e",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "status saved",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"red\",\"shape\":\"dot\",\"text\":\"error\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e42a56e1.0023f8",
        "type": "http in",
        "z": "6096a378.7f109c",
        "name": "",
        "url": "/answers/json",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 100,
        "wires": [
            [
                "6bdbed67.e2d6b4"
            ]
        ]
    },
    {
        "id": "8b3d3049.ea7b1",
        "type": "file in",
        "z": "6096a378.7f109c",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 590,
        "y": 100,
        "wires": [
            [
                "b9d9fa83.e99bd8"
            ]
        ]
    },
    {
        "id": "73350c38.d18564",
        "type": "http response",
        "z": "6096a378.7f109c",
        "name": "",
        "statusCode": "",
        "headers": {
            "Content-Type": "application/json"
        },
        "x": 1230,
        "y": 100,
        "wires": []
    },
    {
        "id": "b9d9fa83.e99bd8",
        "type": "function",
        "z": "6096a378.7f109c",
        "name": "",
        "func": "msg.payload = msg.payload.trim().split('\\n').map((s) => {\n    try {\n        return JSON.parse(s)\n    } catch (err) {\n        return s\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 740,
        "y": 100,
        "wires": [
            [
                "73350c38.d18564"
            ]
        ]
    },
    {
        "id": "6bdbed67.e2d6b4",
        "type": "change",
        "z": "6096a378.7f109c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "filepath",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 100,
        "wires": [
            [
                "8b3d3049.ea7b1"
            ]
        ]
    },
    {
        "id": "a0581166.fc0d2",
        "type": "subflow:6096a378.7f109c",
        "z": "965f4c84.d4613",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/home/pi/data/answers.txt",
                "type": "str"
            }
        ],
        "x": 160,
        "y": 260,
        "wires": []
    },
    {
        "id": "a1d5af14.a922c",
        "type": "comment",
        "z": "965f4c84.d4613",
        "name": "This node serves the collected answers. Adjust filepath to the correct output file.",
        "info": "reachable at [http://:server:/answers](/answers). You should only use a single instance of this node.",
        "x": 340,
        "y": 220,
        "wires": []
    },
    {
        "id": "88e46b7c.331338",
        "type": "http in",
        "z": "6096a378.7f109c",
        "name": "",
        "url": "/answers",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 160,
        "wires": [
            [
                "99e99071.c33af"
            ]
        ]
    },
    {
        "id": "99e99071.c33af",
        "type": "change",
        "z": "6096a378.7f109c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "filepath",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 160,
        "wires": [
            [
                "5ac501a1.66266"
            ]
        ]
    },
    {
        "id": "5ac501a1.66266",
        "type": "file in",
        "z": "6096a378.7f109c",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 590,
        "y": 160,
        "wires": [
            [
                "20cba3c8.addb7c"
            ]
        ]
    },
    {
        "id": "20cba3c8.addb7c",
        "type": "function",
        "z": "6096a378.7f109c",
        "name": "",
        "func": "msg.payload = msg.payload.trim().split('\\n').map((line) => {\n    try {\n        line = JSON.parse(line)\n    } catch (err) {\n        line = []\n    }\n    return line.map((entry) => {\n        entry.value = (typeof entry.value === 'string') ? entry.value : JSON.stringify(entry.value)\n        return entry\n    })\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 740,
        "y": 160,
        "wires": [
            [
                "1e2455ea.65ebea"
            ]
        ]
    },
    {
        "id": "6ecff95.54ed408",
        "type": "http response",
        "z": "6096a378.7f109c",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1230,
        "y": 160,
        "wires": []
    },
    {
        "id": "1e2455ea.65ebea",
        "type": "template",
        "z": "6096a378.7f109c",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>File Uploader</title>\n    <style>\n        body {\n          background-color: linen;\n          font-family: monospace;\n        }\n        \n        input, button {\n            font-family: monospace;\n        }\n        \n        h1 {\n            padding: 10px;\n        }\n        \n        .content {\n            width: 100%;\n            max-width: 700px;\n            margin: 0 auto;\n            padding: 10px 0;\n        }\n    </style>\n  </head>\n  <body>\n    <div class=\"content\">\n    <h1>Answers</h1>\n    {{#payload}}\n        <ul>\n        {{#.}}\n            <li>{{topic}}: {{value}}</li>\n        {{/.}}\n        </ul>\n    {{/payload}}\n    </div>\n  </body>\n</html>",
        "output": "str",
        "x": 940,
        "y": 160,
        "wires": [
            [
                "6ecff95.54ed408"
            ]
        ]
    },
    {
        "id": "5cc5ac44.637eb4",
        "type": "catch",
        "z": "6096a378.7f109c",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 580,
        "y": 220,
        "wires": [
            [
                "ab473ec9.18c65"
            ]
        ]
    },
    {
        "id": "e166e1bc.64419",
        "type": "http response",
        "z": "6096a378.7f109c",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 1240,
        "y": 220,
        "wires": []
    },
    {
        "id": "ab473ec9.18c65",
        "type": "change",
        "z": "6096a378.7f109c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 220,
        "wires": [
            [
                "e166e1bc.64419"
            ]
        ]
    },
    {
        "id": "3a34652d.80236a",
        "type": "switch",
        "z": "7c973ed1.90f49",
        "name": "",
        "property": "operation",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "new",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "append",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 120,
        "wires": [
            [
                "f17be409.f899d8"
            ],
            [
                "e885ba21.712b88"
            ]
        ]
    },
    {
        "id": "e885ba21.712b88",
        "type": "function",
        "z": "7c973ed1.90f49",
        "name": "append to output",
        "func": "const entry = {\n    time: Date.now(),\n    value: msg.payload,\n    topic: env.get('topic')\n}\nconst output = global.get('tools-output') || []\noutput.push(entry)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 670,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "f17be409.f899d8",
        "type": "function",
        "z": "7c973ed1.90f49",
        "name": "clear output",
        "func": "global.set('tools-output', [])\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 690,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "dfaaf640.82c618",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "filepath",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 140,
        "wires": [
            [
                "258422f1.019dde"
            ]
        ]
    },
    {
        "id": "9f6a6701.28d048",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "on",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1690,
        "y": 260,
        "wires": [
            [
                "ac652f4c.6ac8a"
            ]
        ]
    },
    {
        "id": "c4fb46be.b8f9f8",
        "type": "change",
        "z": "d9115fe7.1fc6d",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1690,
        "y": 300,
        "wires": [
            [
                "ac652f4c.6ac8a"
            ]
        ]
    },
    {
        "id": "e707c6ed.586818",
        "type": "inject",
        "z": "965f4c84.d4613",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 130,
        "y": 380,
        "wires": [
            [
                "7e8c3fc4.dc664",
                "aebb417b.ba8f7"
            ]
        ]
    },
    {
        "id": "1e5ab923.851ee7",
        "type": "comment",
        "z": "965f4c84.d4613",
        "name": "Blink led to indicate startup",
        "info": "",
        "x": 180,
        "y": 340,
        "wires": []
    },
    {
        "id": "bd292dcc.2f2ba",
        "type": "comment",
        "z": "965f4c84.d4613",
        "name": "This flow needs to be enabled to activate the web interfaces and the startup animation of the chatterbox.",
        "info": "reachable at [http://:server:/uploads](/uploads). You should only use a single instance of this node.",
        "x": 420,
        "y": 40,
        "wires": []
    },
    {
        "id": "5feea866.a5d7b8",
        "type": "rpi-gpio in",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "pin": "16",
        "intype": "tri",
        "debounce": "25",
        "read": false,
        "x": 190,
        "y": 160,
        "wires": [
            [
                "4b01ce17.c62e5"
            ]
        ]
    },
    {
        "id": "ae0f48b9.eabec8",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Reagiert auf den Pusbutton der Dose und gibst signal aus wenn er gedrueckt wird.",
        "info": "",
        "x": 370,
        "y": 120,
        "wires": []
    },
    {
        "id": "f0a9febc.879f8",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 180,
        "y": 300,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "4f1cc2bb.b97cac",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 170,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "53aec3fd.b2ad4c",
        "type": "subflow:7c973ed1.90f49",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [
            {
                "name": "operation",
                "value": "new",
                "type": "str"
            }
        ],
        "x": 150,
        "y": 820,
        "wires": []
    },
    {
        "id": "a12978e0.701fa8",
        "type": "say",
        "z": "5588b46c.506a2c",
        "name": "",
        "text": "",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 130,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "8b2e457.2141fb8",
        "type": "fuzzy-match",
        "z": "5588b46c.506a2c",
        "name": "",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:aufjedenfall\nyes:klar\nyes:gerne\nyes:einverstanden\nyes:Ok\nyes:Okay\nyes:In ordnung\nyes:ja * wieso nicht\nno:nein * bitte nicht\nno:nein\nno:aufkeinenfall\nno:mchte ich nicht\nno:will ich nicht\nno:nee\nno:lieber nicht",
        "scorer": "WRatio",
        "limit": "0",
        "cutoff": "0",
        "x": 150,
        "y": 440,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "9e15d46f.7e2248",
        "type": "play-soundfile",
        "z": "5588b46c.506a2c",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "",
        "allow_multiple": false,
        "x": 160,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "60f67e35.6ad11",
        "type": "delay",
        "z": "5588b46c.506a2c",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 980,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "1851008e.84bc0f",
        "type": "switch",
        "z": "5588b46c.506a2c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 440,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "9fa5b64e.cd3998",
        "type": "debug",
        "z": "5588b46c.506a2c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 640,
        "wires": []
    },
    {
        "id": "ec63c1a6.1d772",
        "type": "inject",
        "z": "5588b46c.506a2c",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 990,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "c2578116.aee73",
        "type": "subflow:5e5de4d5.8fa87c",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 150,
        "y": 160,
        "wires": [
            []
        ],
        "icon": "node-red-dashboard/ui_switch.png"
    },
    {
        "id": "7587a0a4.521ec",
        "type": "status",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "scope": [
            "5feea866.a5d7b8"
        ],
        "x": 200,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "ffd82054.4c32f",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Startet Microfon-Aufnahme und Sprach-Transcription.",
        "info": "Opionen:\n\n* language: Whle hier den die Sprache fuer die eingesprochenen Texte aus. Standard: de\n\n* timeout: Zeitspanne, nach der die Sprach-Aufnahme automatisch beendet wird, wenn nichts empfangen wird. (in s)\n\n* initialWait: Zeitspanne, wie lange am Anfang der Aufnahme auf eine Eingabe gewartet wird. (in s)\n\n* duration: Maximale Dauer einer Aufnahme. (in s)\n\n* playBeep: Spiele einen kurzen Ton beim Starten und Beenden der Aufnahme",
        "x": 280,
        "y": 260,
        "wires": []
    },
    {
        "id": "2a695a61.2df8c6",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Hier werden alle wichtigen nodes zum erstellen von Dialogen beschrieben. Mit einem Doppelklick auf ein Kommentar kannst du mehr zu den einzelnen Nodes erfahren.",
        "info": "",
        "x": 590,
        "y": 40,
        "wires": []
    },
    {
        "id": "f2f768ce.3f64d8",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Node dient zum speichern der eingesprochenen Antworten.",
        "info": "Zu Begin des Dialogs (gleich nach dem Pushbutton) wird eine neue Aufzeichnung mit der Opeartion \"new\" gestartet. Das Topic wird dabei ignoriert\n\nJede Eingabe die gespeichert wird, wird durch die operation append hinzugefuegt. Zu jeder Eingabe kann ein Topic angegeben werden.\n\nAm Ende des Dialogs koennen die Eingaben mit der Node \"tools-write-output\" gespeichert werden.",
        "x": 300,
        "y": 780,
        "wires": []
    },
    {
        "id": "af297d34.66244",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Unterscheidet zwischen verschiedenen Optionen, die eingesprochen wurden.",
        "info": "Dieses Beispiel unterscheidet zwischen ja/nein und gibt entweder yes oder no aus, je nachdem was erkannt wurde. Je mehr Saetze in der Node Config eingegeben werden, desto besser funktioniert die Erkennung.\n\nDiese Node kann nicht nur zwischen ja und nein unterscheiden, sondern auch zwischen anderen Fllen mit der entsprechenden Konfiguration.",
        "x": 350,
        "y": 400,
        "wires": []
    },
    {
        "id": "1f197cbb.b0d463",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Spielt eine Sound Datei ab.",
        "info": "Als directory muss der entsprechende Ordner ausgewaehlt werden in dem sich die Sound Dateien befinden.\n\nAls Dateiname muss der Name der entsprechenden Datei angegeben werden.\n\nSound Dateien koennen mittels des uploads tools unter [http://raspberrypi.local:1880/uploads]() hochgeladen werden",
        "x": 190,
        "y": 520,
        "wires": []
    },
    {
        "id": "ef39f7e2.90d658",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Gibt den eingegenen Text mit einer synthetischen Stimme aus.",
        "info": "",
        "x": 300,
        "y": 640,
        "wires": []
    },
    {
        "id": "e9473fb3.17bb2",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Schreibt die mit tools-output gespeicherten Antworten in eine Datei.",
        "info": "filepath spezifiziert die Datei in welche geschrieben wird.",
        "x": 320,
        "y": 900,
        "wires": []
    },
    {
        "id": "2d8d881b.e1bf38",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Verzoegert den Dialog Flow",
        "info": "Mit dieser Node kann man Pausen zwischen den verschiedenen Ablaeufen einfuegen.",
        "x": 1040,
        "y": 260,
        "wires": []
    },
    {
        "id": "7b7341d6.7903b",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Diese Node erlaubt eine Fallunterscheidung und damit eine Verzweigung des dialogs",
        "info": "Sie laesst sich z.b. mit fuzzy match paaren",
        "x": 1210,
        "y": 400,
        "wires": []
    },
    {
        "id": "5862b396.f8434c",
        "type": "fuzzy-match",
        "z": "5588b46c.506a2c",
        "name": "",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:aufjedenfall\nyes:klar\nyes:gerne\nyes:einverstanden\nyes:Ok\nyes:Okay\nyes:In ordnung\nyes:ja * wieso nicht\nno:nein * bitte nicht\nno:nein\nno:aufkeinenfall\nno:mchte ich nicht\nno:will ich nicht\nno:nee\nno:lieber nicht",
        "scorer": "WRatio",
        "limit": "0",
        "cutoff": "0",
        "x": 1210,
        "y": 440,
        "wires": [
            [
                "2f91e717.d70c98"
            ],
            []
        ]
    },
    {
        "id": "2f91e717.d70c98",
        "type": "switch",
        "z": "5588b46c.506a2c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1390,
        "y": 440,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "af3e0827.ca5968",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 420,
        "y": 820,
        "wires": [
            [
                "30c64b9e.d37794"
            ],
            []
        ]
    },
    {
        "id": "30c64b9e.d37794",
        "type": "subflow:7c973ed1.90f49",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [
            {
                "name": "operation",
                "value": "new",
                "type": "str"
            }
        ],
        "x": 630,
        "y": 820,
        "wires": []
    },
    {
        "id": "4d25a43e.80806c",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 420,
        "y": 440,
        "wires": [
            [
                "a67fae6c.c2bd9"
            ],
            []
        ]
    },
    {
        "id": "a67fae6c.c2bd9",
        "type": "fuzzy-match",
        "z": "5588b46c.506a2c",
        "name": "",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:aufjedenfall\nyes:klar\nyes:gerne\nyes:einverstanden\nyes:Ok\nyes:Okay\nyes:In ordnung\nyes:ja * wieso nicht\nno:nein * bitte nicht\nno:nein\nno:aufkeinenfall\nno:mchte ich nicht\nno:will ich nicht\nno:nee\nno:lieber nicht",
        "scorer": "WRatio",
        "limit": "0",
        "cutoff": "0",
        "x": 630,
        "y": 440,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "fd73afb9.8d628",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Ausgabe von Dialog Nachrichten",
        "info": "Diese node erlaubt es innerhalb des Dialog Flows Nachrichten abzugreifen um den Flow zu testen bzw sich die Ausgabe anzusehen. Die Ausgebeben Nachrichten erscheinen im Debug Reiter der Anzeige auf der rechten Seite der Node Red Bedienoberflaeche.",
        "x": 1050,
        "y": 600,
        "wires": []
    },
    {
        "id": "68de2d58.842774",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Kann eine Aktion im Flow triggern",
        "info": "Die inject node wird in den Dialog Flow eingebaut um bestimmte Aktionen zu triggern, z.b. um den Ablauf eines Dialogs zu testen. Durch clicken auf die Node wird die Aktion ausgeloest.",
        "x": 1060,
        "y": 780,
        "wires": []
    },
    {
        "id": "b0242b4f.3672d8",
        "type": "say",
        "z": "5588b46c.506a2c",
        "name": "",
        "text": "Hello, how are you?",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 1360,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "e6a1d489.4471f8",
        "type": "inject",
        "z": "5588b46c.506a2c",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1170,
        "y": 820,
        "wires": [
            [
                "b0242b4f.3672d8"
            ]
        ]
    },
    {
        "id": "a3076424.ecb408",
        "type": "inject",
        "z": "5588b46c.506a2c",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Hello World",
        "payloadType": "str",
        "x": 1230,
        "y": 640,
        "wires": [
            [
                "17734061.da4ba"
            ]
        ]
    },
    {
        "id": "17734061.da4ba",
        "type": "debug",
        "z": "5588b46c.506a2c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 640,
        "wires": []
    },
    {
        "id": "b41f3ae8.6fb888",
        "type": "say",
        "z": "5588b46c.506a2c",
        "name": "",
        "text": "",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 1570,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "b10a06e5.4a69c8",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "Freitext Frage",
        "info": "",
        "x": 290,
        "y": 140,
        "wires": []
    },
    {
        "id": "c88b438d.445e1",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "Dialog Start / Begruesung",
        "info": "",
        "x": 330,
        "y": 300,
        "wires": []
    },
    {
        "id": "b481433e.840ae",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "Dialog Ende / Verabschiedung",
        "info": "",
        "x": 340,
        "y": 500,
        "wires": []
    },
    {
        "id": "ee605bc5.3e0998",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "ja/nein / Unterschiedliche Dialog Verlaeufe",
        "info": "",
        "x": 380,
        "y": 680,
        "wires": []
    },
    {
        "id": "82d0d2e0.6ca35",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "skala / von-bis",
        "info": "",
        "x": 300,
        "y": 860,
        "wires": []
    },
    {
        "id": "864d3204.6ed41",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "Speichern von antworten",
        "info": "* qs-output mit operation new started einen neuen datenbank eintrag und muss zu beginn des Dialogs gesetzt werden.\n\n* qs-output mit operation append schreibt die daten in den datenbank eintrag\n\n* qs-save-output schreibt den eintrag in die datenbank. Es muss am ende des Dialogs gesetzt werden",
        "x": 330,
        "y": 1060,
        "wires": []
    },
    {
        "id": "ff7b0b6d.0a54b8",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "Stimm synthese",
        "info": "",
        "x": 300,
        "y": 1280,
        "wires": []
    },
    {
        "id": "863a6698.56d418",
        "type": "play-soundfile",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "",
        "allow_multiple": false,
        "x": 480,
        "y": 180,
        "wires": [
            [
                "4876f0e8.ffe6"
            ]
        ]
    },
    {
        "id": "82ee7528.2e6428",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 180,
        "wires": [
            [
                "863a6698.56d418"
            ]
        ]
    },
    {
        "id": "4876f0e8.ffe6",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [],
        "x": 700,
        "y": 180,
        "wires": [
            [
                "1966dad8.0b8bd5",
                "49458b63.a15974"
            ],
            []
        ]
    },
    {
        "id": "1966dad8.0b8bd5",
        "type": "debug",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 180,
        "wires": []
    },
    {
        "id": "6b612bac.d184b4",
        "type": "play-soundfile",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "",
        "allow_multiple": false,
        "x": 480,
        "y": 340,
        "wires": [
            [
                "d84b173c.1aa648",
                "23e323be.f9666c"
            ]
        ]
    },
    {
        "id": "68e67e36.5a862",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 340,
        "wires": [
            [
                "6b612bac.d184b4"
            ]
        ]
    },
    {
        "id": "d84b173c.1aa648",
        "type": "subflow:7c973ed1.90f49",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "operation",
                "value": "new",
                "type": "str"
            }
        ],
        "x": 690,
        "y": 400,
        "wires": []
    },
    {
        "id": "23e323be.f9666c",
        "type": "delay",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 660,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "8b4a46d3.671f68",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 540,
        "wires": [
            [
                "220f163.e7debea"
            ]
        ]
    },
    {
        "id": "220f163.e7debea",
        "type": "play-soundfile",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "",
        "allow_multiple": false,
        "x": 480,
        "y": 540,
        "wires": [
            [
                "b6469eb4.a553",
                "8ef4bb74.a4ee28"
            ]
        ]
    },
    {
        "id": "b6469eb4.a553",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/home/pi/data/test-answers.txt",
                "type": "str"
            }
        ],
        "x": 710,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "49458b63.a15974",
        "type": "subflow:7c973ed1.90f49",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "topic",
                "value": "tools-test",
                "type": "str"
            }
        ],
        "x": 970,
        "y": 240,
        "wires": []
    },
    {
        "id": "65aea4ba.f6998c",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 720,
        "wires": [
            [
                "8b88232b.b193"
            ]
        ]
    },
    {
        "id": "8b88232b.b193",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "1",
                "type": "num"
            },
            {
                "name": "duration",
                "value": "15",
                "type": "num"
            }
        ],
        "x": 480,
        "y": 720,
        "wires": [
            [
                "9e469f7d.ae723"
            ],
            []
        ]
    },
    {
        "id": "9e469f7d.ae723",
        "type": "fuzzy-match",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "inputOptions": "text",
        "choices": "yes:Ja\nno:Nein",
        "scorer": "WRatio",
        "limit": "0",
        "cutoff": "0",
        "x": 690,
        "y": 720,
        "wires": [
            [
                "ffbf6fc3.d41dc"
            ],
            []
        ]
    },
    {
        "id": "ffbf6fc3.d41dc",
        "type": "switch",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 850,
        "y": 720,
        "wires": [
            [
                "ad5a6c16.2ba3"
            ],
            [
                "1d1bfcd0.9fe443"
            ]
        ]
    },
    {
        "id": "ad5a6c16.2ba3",
        "type": "say",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "text": "Yes",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 1010,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "1d1bfcd0.9fe443",
        "type": "say",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "text": "No",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 1010,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "c195ed90.68808",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "verlauf nach ja",
        "info": "",
        "x": 1160,
        "y": 680,
        "wires": []
    },
    {
        "id": "db90226e.c587c",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "verlauf nach nein",
        "info": "",
        "x": 1160,
        "y": 760,
        "wires": []
    },
    {
        "id": "ba43d73d.a360d8",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 900,
        "wires": [
            [
                "97699212.22276"
            ]
        ]
    },
    {
        "id": "57e03f0.fe610c",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "1",
                "type": "num"
            },
            {
                "name": "duration",
                "value": "15",
                "type": "num"
            }
        ],
        "x": 800,
        "y": 900,
        "wires": [
            [
                "c0909535.d5e5f8"
            ],
            []
        ]
    },
    {
        "id": "c0909535.d5e5f8",
        "type": "fuzzy-match",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "inputOptions": "text",
        "choices": "1:eins\n1:1\n2:zwei\n2:2\n3:drei\n3:3\n4:vier\n4:4\n5:fnf\n5:5",
        "scorer": "distance",
        "limit": "0",
        "cutoff": "0",
        "x": 1010,
        "y": 900,
        "wires": [
            [
                "3f9b79f2.2d2e96"
            ],
            []
        ]
    },
    {
        "id": "97699212.22276",
        "type": "say",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "text": "Waehle auf einer Skala 1 bis 5",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 510,
        "y": 900,
        "wires": [
            [
                "57e03f0.fe610c"
            ]
        ]
    },
    {
        "id": "3f9b79f2.2d2e96",
        "type": "debug",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 900,
        "wires": []
    },
    {
        "id": "68a1d22a.2af1ac",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 1100,
        "wires": [
            [
                "a862dccc.d9721",
                "c430de9e.6a1f7"
            ]
        ]
    },
    {
        "id": "a862dccc.d9721",
        "type": "subflow:7c973ed1.90f49",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "operation",
                "value": "new",
                "type": "str"
            }
        ],
        "x": 490,
        "y": 1160,
        "wires": []
    },
    {
        "id": "71f0a300.24c17c",
        "type": "inject",
        "z": "7c973ed1.90f49",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "operation",
        "payloadType": "env",
        "x": 350,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6ad0fe1e.c0533",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/home/pi/data/test-answers.txt",
                "type": "str"
            }
        ],
        "x": 940,
        "y": 1100,
        "wires": [
            [
                "dd42dc58.a8269"
            ]
        ]
    },
    {
        "id": "c430de9e.6a1f7",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "1",
                "type": "num"
            }
        ],
        "x": 500,
        "y": 1100,
        "wires": [
            [
                "a75d63fa.87c0c",
                "48c20c04.d4ad34"
            ],
            []
        ]
    },
    {
        "id": "a75d63fa.87c0c",
        "type": "delay",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 720,
        "y": 1100,
        "wires": [
            [
                "6ad0fe1e.c0533"
            ]
        ]
    },
    {
        "id": "48c20c04.d4ad34",
        "type": "subflow:7c973ed1.90f49",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [
            {
                "name": "topic",
                "value": "tools-test",
                "type": "str"
            }
        ],
        "x": 750,
        "y": 1160,
        "wires": []
    },
    {
        "id": "dd42dc58.a8269",
        "type": "debug",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 1100,
        "wires": []
    },
    {
        "id": "561ea576.c2dbec",
        "type": "inject",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 290,
        "y": 1320,
        "wires": [
            [
                "75752ea6.2823c"
            ]
        ]
    },
    {
        "id": "75752ea6.2823c",
        "type": "say",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "text": "Hello, how are you?",
        "voice": "",
        "voiceString": "",
        "speed": 1,
        "x": 480,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "9aa42819.4baf98",
        "type": "comment",
        "z": "a22a1db7.e3ac9",
        "name": "Dieser Flow beeinhaltet Funktionale Bloecke aus denen Dialoge zussammengesetzt werden koennen.",
        "info": "",
        "x": 390,
        "y": 40,
        "wires": []
    },
    {
        "id": "c88a441f.6fd848",
        "type": "change",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tools-output",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 80,
        "wires": [
            [
                "c44a54c4.2e33a8"
            ]
        ]
    },
    {
        "id": "c44a54c4.2e33a8",
        "type": "switch",
        "z": "aaf06e2c.e5b2f",
        "name": "",
        "property": "writeFile",
        "propertyType": "env",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 140,
        "wires": [
            [
                "dfaaf640.82c618"
            ]
        ]
    },
    {
        "id": "a88a3e4c.6cfd4",
        "type": "change",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dialogRunning",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "87087af1.a103b8",
        "type": "delay",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "pauseType": "delay",
        "timeout": "120",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 550,
        "y": 240,
        "wires": [
            [
                "e75028da.eb37c8"
            ]
        ]
    },
    {
        "id": "e75028da.eb37c8",
        "type": "change",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dialogRunning",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "4b01ce17.c62e5",
        "type": "switch",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "property": "dialogRunning",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 160,
        "wires": [
            [
                "a88a3e4c.6cfd4"
            ],
            [
                "87087af1.a103b8"
            ]
        ]
    },
    {
        "id": "8fde2bde.1d61e8",
        "type": "change",
        "z": "e32847a.070d9b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dialogRunning",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "8ef4bb74.a4ee28",
        "type": "subflow:e32847a.070d9b8",
        "z": "a22a1db7.e3ac9",
        "name": "",
        "env": [],
        "x": 710,
        "y": 540,
        "wires": []
    },
    {
        "id": "ca5c1768.7c24d8",
        "type": "subflow:e32847a.070d9b8",
        "z": "5588b46c.506a2c",
        "name": "",
        "x": 1010,
        "y": 160,
        "wires": []
    },
    {
        "id": "fea5c348.bd8da",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Diese Node muss ausgerufen werden um den Dialog zu beenden.",
        "info": "",
        "x": 1150,
        "y": 120,
        "wires": []
    },
    {
        "id": "e0a022fc.8f877",
        "type": "delay",
        "z": "6f60f9a7.d36138",
        "name": "",
        "pauseType": "delayv",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 880,
        "y": 200,
        "wires": [
            [
                "e8335ed6.beff"
            ]
        ]
    },
    {
        "id": "90ee9fd2.3d0d",
        "type": "change",
        "z": "6f60f9a7.d36138",
        "name": "on",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 280,
        "wires": [
            [
                "d128000d.037ff",
                "c96a1a0a.4b9848"
            ]
        ]
    },
    {
        "id": "e8335ed6.beff",
        "type": "change",
        "z": "6f60f9a7.d36138",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 200,
        "wires": [
            [
                "3f716690.19c64a",
                "d128000d.037ff"
            ]
        ]
    },
    {
        "id": "3f716690.19c64a",
        "type": "delay",
        "z": "6f60f9a7.d36138",
        "name": "",
        "pauseType": "delayv",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1220,
        "y": 200,
        "wires": [
            [
                "90ee9fd2.3d0d"
            ]
        ]
    },
    {
        "id": "d128000d.037ff",
        "type": "rpi-gpio out",
        "z": "6f60f9a7.d36138",
        "name": "",
        "pin": "15",
        "set": "",
        "level": "0",
        "freq": "",
        "out": "out",
        "x": 1220,
        "y": 420,
        "wires": []
    },
    {
        "id": "acbca59b.b5f588",
        "type": "change",
        "z": "6f60f9a7.d36138",
        "name": "open",
        "rules": [
            {
                "t": "set",
                "p": "blinking",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "rate",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 180,
        "wires": [
            [
                "c96a1a0a.4b9848"
            ]
        ]
    },
    {
        "id": "669471e5.7e461",
        "type": "change",
        "z": "6f60f9a7.d36138",
        "name": "close",
        "rules": [
            {
                "t": "set",
                "p": "blinking",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 220,
        "wires": [
            [
                "c96a1a0a.4b9848"
            ]
        ]
    },
    {
        "id": "c96a1a0a.4b9848",
        "type": "switch",
        "z": "6f60f9a7.d36138",
        "name": "",
        "property": "blinking",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 200,
        "wires": [
            [
                "e0a022fc.8f877"
            ]
        ]
    },
    {
        "id": "712950f8.19f8c",
        "type": "switch",
        "z": "6f60f9a7.d36138",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 410,
        "y": 200,
        "wires": [
            [
                "acbca59b.b5f588"
            ],
            [
                "669471e5.7e461"
            ]
        ]
    },
    {
        "id": "e9feaec2.ff23",
        "type": "status",
        "z": "6f60f9a7.d36138",
        "name": "",
        "scope": [
            "d128000d.037ff"
        ],
        "x": 1220,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "5676721e.95feac",
        "type": "switch",
        "z": "6f60f9a7.d36138",
        "name": "",
        "property": "blink",
        "propertyType": "env",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 220,
        "wires": [
            [
                "712950f8.19f8c"
            ],
            [
                "4a632a62.731ba4"
            ]
        ]
    },
    {
        "id": "4a632a62.731ba4",
        "type": "switch",
        "z": "6f60f9a7.d36138",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 410,
        "y": 400,
        "wires": [
            [
                "ce37fcd1.8877e"
            ],
            [
                "bddd0be0.5a9938"
            ]
        ]
    },
    {
        "id": "ce37fcd1.8877e",
        "type": "change",
        "z": "6f60f9a7.d36138",
        "name": "on",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 380,
        "wires": [
            [
                "d128000d.037ff"
            ]
        ]
    },
    {
        "id": "bddd0be0.5a9938",
        "type": "change",
        "z": "6f60f9a7.d36138",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 420,
        "wires": [
            [
                "d128000d.037ff"
            ]
        ]
    },
    {
        "id": "b1995d70.a00f",
        "type": "subflow:6f60f9a7.d36138",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 620,
        "y": 1120,
        "wires": []
    },
    {
        "id": "d4b17a7b.5e2428",
        "type": "inject",
        "z": "5588b46c.506a2c",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 390,
        "y": 1100,
        "wires": [
            [
                "b1995d70.a00f"
            ]
        ]
    },
    {
        "id": "2c78ee93.757d82",
        "type": "inject",
        "z": "5588b46c.506a2c",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "x": 390,
        "y": 1140,
        "wires": [
            [
                "b1995d70.a00f"
            ]
        ]
    },
    {
        "id": "68708522.0a6abc",
        "type": "comment",
        "z": "5588b46c.506a2c",
        "name": "Schaltet die Button Led an oder aus, oder laesst sie blinken.",
        "info": "",
        "x": 300,
        "y": 1060,
        "wires": []
    },
    {
        "id": "4cc07a2e.612d44",
        "type": "subflow:6f60f9a7.d36138",
        "z": "5588b46c.506a2c",
        "name": "",
        "env": [],
        "x": 160,
        "y": 1100,
        "wires": []
    },
    {
        "id": "7e8c3fc4.dc664",
        "type": "subflow:6f60f9a7.d36138",
        "z": "965f4c84.d4613",
        "name": "",
        "env": [
            {
                "name": "rate",
                "value": "200",
                "type": "num"
            }
        ],
        "x": 660,
        "y": 380,
        "wires": []
    },
    {
        "id": "aebb417b.ba8f7",
        "type": "delay",
        "z": "965f4c84.d4613",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 280,
        "y": 440,
        "wires": [
            [
                "ecac1c89.07307"
            ]
        ]
    },
    {
        "id": "ecac1c89.07307",
        "type": "change",
        "z": "965f4c84.d4613",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 440,
        "wires": [
            [
                "7e8c3fc4.dc664"
            ]
        ]
    },
    {
        "id": "ac652f4c.6ac8a",
        "type": "subflow:6f60f9a7.d36138",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "env": [],
        "x": 1940,
        "y": 280,
        "wires": []
    },
    {
        "id": "7f483354.26da3c",
        "type": "inject",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 210,
        "y": 40,
        "wires": [
            [
                "204271be.a11c3e"
            ]
        ]
    },
    {
        "id": "204271be.a11c3e",
        "type": "change",
        "z": "5e5de4d5.8fa87c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dialogRunning",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "4343e92e.1ad378",
        "type": "switch",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "property": "playBeep",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1010,
        "y": 280,
        "wires": [
            [
                "28142bbd.a6e2a4"
            ],
            []
        ]
    },
    {
        "id": "28142bbd.a6e2a4",
        "type": "delay",
        "z": "d9115fe7.1fc6d",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1190,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "3590e2d9.aec06e",
        "type": "inject",
        "z": "1c156992.8e395e",
        "name": "start",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 250,
        "y": 340,
        "wires": [
            [
                "6cf58727.97376"
            ]
        ]
    },
    {
        "id": "6cf58727.97376",
        "type": "play-soundfile",
        "z": "1c156992.8e395e",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "example_01_hallo.wav",
        "allow_multiple": false,
        "x": 460,
        "y": 340,
        "wires": [
            [
                "5f75eff5.f4c38",
                "b5c95802.2c3818"
            ]
        ]
    },
    {
        "id": "25220031.262538",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "1. Begrung",
        "info": "",
        "x": 430,
        "y": 300,
        "wires": []
    },
    {
        "id": "6bb58c54.f32d1c",
        "type": "play-soundfile",
        "z": "1c156992.8e395e",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "example_02_startfrage.wav",
        "allow_multiple": false,
        "x": 900,
        "y": 340,
        "wires": [
            [
                "1b4c6f2f.845f79"
            ]
        ]
    },
    {
        "id": "5f75eff5.f4c38",
        "type": "delay",
        "z": "1c156992.8e395e",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 680,
        "y": 340,
        "wires": [
            [
                "6bb58c54.f32d1c"
            ]
        ]
    },
    {
        "id": "a4dbeb4.01f5f98",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "2. Frage: Als erstes...",
        "info": "",
        "x": 840,
        "y": 300,
        "wires": []
    },
    {
        "id": "b5c95802.2c3818",
        "type": "subflow:7c973ed1.90f49",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "operation",
                "value": "new",
                "type": "str"
            }
        ],
        "x": 690,
        "y": 460,
        "wires": []
    },
    {
        "id": "5c78ee1e.f81958",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "1a. Starte einen neuen Datenbank Eintrag",
        "info": "",
        "x": 780,
        "y": 420,
        "wires": []
    },
    {
        "id": "a6ccf674.f55dc8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "0. Start",
        "info": "Beginne den Dialog",
        "x": 230,
        "y": 220,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "1b4c6f2f.845f79",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "1",
                "type": "num"
            }
        ],
        "x": 1180,
        "y": 340,
        "wires": [
            [
                "ca2b820d.85ca38"
            ],
            []
        ]
    },
    {
        "id": "ca2b820d.85ca38",
        "type": "fuzzy-match",
        "z": "1c156992.8e395e",
        "name": "recognize yes/no",
        "inputOptions": "text",
        "choices": "yes:Ja\nyes:aufjedenfall\nyes:klar\nyes:gerne\nyes:mache ich gerne\nyes:voll gerne\nyes:ich mag museum\nyes:eigentlich schon\nyes:sehr gerne\nno:nein\nno:nein\nno:aufkeinenfall\nno:mchte ich nicht\nno:mag ich nicht\nno:nee\nno:ich hasse museum\nno:nicht so gerne",
        "scorer": "token_sort_ratio",
        "limit": "0",
        "cutoff": "20",
        "x": 1450,
        "y": 340,
        "wires": [
            [
                "c4fd1e97.ae6158"
            ],
            []
        ]
    },
    {
        "id": "c4fd1e97.ae6158",
        "type": "switch",
        "z": "1c156992.8e395e",
        "name": "switch yes / no",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "no",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "yes",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1720,
        "y": 340,
        "wires": [
            [
                "a0a9254d.303958"
            ],
            [
                "d741c7cc.a1a188"
            ],
            [
                "a0a9254d.303958"
            ]
        ]
    },
    {
        "id": "7f1f411e.1bacf",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "3a. Aufnahme Antwort ",
        "info": "",
        "x": 1180,
        "y": 300,
        "wires": []
    },
    {
        "id": "4a50d4d.12b6bac",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "3b. Antwort erkennen (Ja/Nein)",
        "info": "",
        "x": 1490,
        "y": 300,
        "wires": []
    },
    {
        "id": "112fa386.6f02f4",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "3c. Switch (Ja/Nein)",
        "info": "",
        "x": 1730,
        "y": 300,
        "wires": []
    },
    {
        "id": "a0a9254d.303958",
        "type": "play-soundfile",
        "z": "1c156992.8e395e",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "example_04_ungern.wav",
        "allow_multiple": false,
        "x": 2050,
        "y": 280,
        "wires": [
            [
                "acca1830.3425b"
            ]
        ]
    },
    {
        "id": "d741c7cc.a1a188",
        "type": "play-soundfile",
        "z": "1c156992.8e395e",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "example_03_gerne.wav",
        "allow_multiple": false,
        "x": 2050,
        "y": 440,
        "wires": [
            [
                "f4b9d2a9.e0ceb8"
            ]
        ]
    },
    {
        "id": "ec6c7f40.4f0ce",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Folgefrage auf \"Ja\"",
        "info": "",
        "x": 2030,
        "y": 400,
        "wires": []
    },
    {
        "id": "381bb4a8.4c99ac",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Folgefrage auf \"Nein\"",
        "info": "",
        "x": 2040,
        "y": 240,
        "wires": []
    },
    {
        "id": "acca1830.3425b",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "3",
                "type": "num"
            }
        ],
        "x": 2300,
        "y": 280,
        "wires": [
            [
                "411566f6.3daf1",
                "69a51d68.9c976c"
            ],
            []
        ]
    },
    {
        "id": "a9028d52.9bb72",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Aufnahme der Antwort",
        "info": "",
        "x": 2300,
        "y": 240,
        "wires": []
    },
    {
        "id": "f4b9d2a9.e0ceb8",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "3",
                "type": "num"
            }
        ],
        "x": 2300,
        "y": 440,
        "wires": [
            [
                "411566f6.3daf1",
                "7b729e13.431b4"
            ],
            []
        ]
    },
    {
        "id": "1fddac5d.b35844",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Aufnahme der Antwort",
        "info": "",
        "x": 2300,
        "y": 400,
        "wires": []
    },
    {
        "id": "411566f6.3daf1",
        "type": "play-soundfile",
        "z": "1c156992.8e395e",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "example_05_kreativ.wav",
        "allow_multiple": false,
        "x": 2730,
        "y": 340,
        "wires": [
            [
                "493139f6.50d978"
            ]
        ]
    },
    {
        "id": "493139f6.50d978",
        "type": "subflow:d9115fe7.1fc6d",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "timeout",
                "value": "3",
                "type": "num"
            }
        ],
        "x": 3000,
        "y": 340,
        "wires": [
            [
                "9356227f.93721",
                "293d5fd1.c1f35"
            ],
            []
        ]
    },
    {
        "id": "814204ac.559ad",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Kreativfrage",
        "info": "",
        "x": 2690,
        "y": 300,
        "wires": []
    },
    {
        "id": "43b93395.83e684",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Verabschiedung",
        "info": "",
        "x": 3240,
        "y": 300,
        "wires": []
    },
    {
        "id": "9356227f.93721",
        "type": "subflow:7c973ed1.90f49",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "topic",
                "value": "Engagement",
                "type": "str"
            }
        ],
        "x": 3230,
        "y": 460,
        "wires": []
    },
    {
        "id": "fd3da69c.04e2f",
        "type": "subflow:aaf06e2c.e5b2f",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "filepath",
                "value": "/home/pi/data/example-answers.txt",
                "type": "str"
            }
        ],
        "x": 3550,
        "y": 340,
        "wires": [
            [
                "9fc44b88.02211",
                "ec23bb39.00fa28"
            ]
        ]
    },
    {
        "id": "293d5fd1.c1f35",
        "type": "play-soundfile",
        "z": "1c156992.8e395e",
        "name": "",
        "directory": "bbacc559.40a508",
        "file": "example_06_tschuess.wav",
        "allow_multiple": true,
        "x": 3280,
        "y": 340,
        "wires": [
            [
                "fd3da69c.04e2f"
            ]
        ]
    },
    {
        "id": "ec23bb39.00fa28",
        "type": "debug",
        "z": "1c156992.8e395e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 3810,
        "y": 340,
        "wires": []
    },
    {
        "id": "9fda99cb.36e8b",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "4. Antwort speichern",
        "info": "",
        "x": 3250,
        "y": 420,
        "wires": []
    },
    {
        "id": "57d2ab62.e14bf4",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "5. In Datenbank speichern",
        "info": "",
        "x": 3570,
        "y": 300,
        "wires": []
    },
    {
        "id": "28aebd3b.2d31d2",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "Aufnahme der Antwort",
        "info": "",
        "x": 3000,
        "y": 300,
        "wires": []
    },
    {
        "id": "21a295b8.6ca5fa",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "6. Antwort ausgeben lassen",
        "info": "",
        "x": 3860,
        "y": 300,
        "wires": []
    },
    {
        "id": "69a51d68.9c976c",
        "type": "subflow:7c973ed1.90f49",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "topic",
                "value": "Museumsfan",
                "type": "str"
            }
        ],
        "x": 2530,
        "y": 200,
        "wires": []
    },
    {
        "id": "fa988d35.41cda8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "4. Antwort speichern",
        "info": "",
        "x": 2550,
        "y": 160,
        "wires": []
    },
    {
        "id": "7b729e13.431b4",
        "type": "subflow:7c973ed1.90f49",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [
            {
                "name": "topic",
                "value": "Museumsfan",
                "type": "str"
            }
        ],
        "x": 2530,
        "y": 500,
        "wires": []
    },
    {
        "id": "db6a3c1a.786ee8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "4. Antwort speichern",
        "info": "",
        "x": 2550,
        "y": 460,
        "wires": []
    },
    {
        "id": "67c3405a.68cb38",
        "type": "subflow:5e5de4d5.8fa87c",
        "z": "1c156992.8e395e",
        "name": "",
        "env": [],
        "x": 230,
        "y": 280,
        "wires": [
            [
                "6cf58727.97376"
            ]
        ]
    },
    {
        "id": "9fc44b88.02211",
        "type": "subflow:e32847a.070d9b8",
        "z": "1c156992.8e395e",
        "name": "",
        "x": 3830,
        "y": 420,
        "wires": []
    },
    {
        "id": "912917e4.5596a8",
        "type": "comment",
        "z": "5fecfc4e.735094",
        "name": "Use this flow to test out node red and play around with the components",
        "info": "",
        "x": 270,
        "y": 40,
        "wires": []
    },
    {
        "id": "17ecd5e1.b71d5a",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "0. Um den Dialog zu starten gibt es zwei Optionen: ",
        "info": "Beginne den Dialog",
        "x": 370,
        "y": 700,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "df01ef3d.e6184",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Ist der Raspberry Pi (ber den Pin 16) bereits mit der Dose verbunden, startet der Dialog durch Drcken des Knopfes.",
        "info": "",
        "x": 580,
        "y": 740,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "f9ed0c62.06b8e",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Alternativ kann der Dialog innerhalb von Node Red auch ber das Drcken der \"start\"-Node gestartet werden.",
        "info": "",
        "x": 560,
        "y": 780,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "e2d88b88.861ea8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "ERLUTERUNGEN",
        "info": "",
        "x": 270,
        "y": 620,
        "wires": []
    },
    {
        "id": "3431e05e.d4a24",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "1. Begrung (Audio)",
        "info": "",
        "x": 280,
        "y": 840,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "bda0c6d6.d5ec28",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Der Dialog startet hier mit einer Begrung. Mit einer kleinen Vorstellung (Wer spricht, worum geht's) schafft man einen einfachen Einstieg.",
        "info": "",
        "x": 650,
        "y": 880,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "ca48d0b.5f3a33",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "1a. Datenbankeintrag starten",
        "info": "",
        "x": 300,
        "y": 1020,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "fa7e3c96.f9e15",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Fr einen persnlichen Charakter empfielt sich das Einsprechen des Textes und das Einbinden der Audiodatei.",
        "info": "",
        "x": 560,
        "y": 920,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "e3a8be2b.0141",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Es ist aber auch mglich einen Text mit Hilfe einer computergenerierten Stimme abzuspielen.",
        "info": "",
        "x": 500,
        "y": 960,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "ac45596b.7b68a8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Mit jedem Abspielen wird ein neuer Eintrag in die Datenbank gestartet, so dass die Antworten pro durchgespielten Dialog zusammen gespeichert werden.",
        "info": "",
        "x": 690,
        "y": 1060,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "e180af5c.f95ed",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Fr die Erste \"tools-output\"-Node muss daher die Operation: \"new\" gewhlt werden.",
        "info": "",
        "x": 480,
        "y": 1100,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "22e06a0.d57ed96",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "1b. optionale Frage: Datenschutz (Audio)",
        "info": "",
        "x": 340,
        "y": 1160,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "c45ce450.201bc8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Ein mglicher Zwischenschritt: Je nach geplantem Einsatz ist es datenschutztechnisch ratsam die interagierende ",
        "info": "",
        "x": 570,
        "y": 1200,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "76e8c161.bd98b",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": " Person nach ihrer Zustimmung bzgl. der Aufnahme ihrer Stimme zu fragen.",
        "info": "",
        "x": 440,
        "y": 1240,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "cbbdc2f2.47bf7",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "3a. Aufnahme Antwort ",
        "info": "",
        "x": 280,
        "y": 1400,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "6a0dd9af.46fb68",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Diese Node startet die Mikrofon-Aufnahme und Sprach-Transkription um eine Antwort auf die aktuelle Frage zu speichern.",
        "info": "",
        "x": 600,
        "y": 1440,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "2b88ed15.45c422",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- language: Whle hier die Sprache fr die eingesprochenen Texte aus. Standard: de  ",
        "info": "",
        "x": 470,
        "y": 1480,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "eb4fb755.a9f688",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- timeout: Zeitspanne, nach der die Sprach-Aufnahme automatisch beendet wird, wenn nichts empfangen wird. (in s)  ",
        "info": "",
        "x": 570,
        "y": 1520,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "7a320f76.7038c",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- initialWait: Zeitspanne, wie lange am Anfang der Aufnahme auf eine Eingabe gewartet wird. (in s)",
        "info": "",
        "x": 510,
        "y": 1560,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "2658727.2e89b8e",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- duration: Maximale Dauer einer Aufnahme. (in s)",
        "info": "",
        "x": 360,
        "y": 1600,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "40fe9872.115978",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- playBeep: Spiele einen kurzen Ton beim Starten und Beenden der Aufnahme",
        "info": "",
        "x": 450,
        "y": 1640,
        "wires": [],
        "icon": "font-awesome/fa-microphone"
    },
    {
        "id": "4f55f41c.4e3e2c",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "3b. Antwort erkennen (Ja/Nein)",
        "info": "",
        "x": 310,
        "y": 1700,
        "wires": [],
        "icon": "font-awesome/fa-search"
    },
    {
        "id": "1e3d81d.8f8387e",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Diese Node erkennt im aufgenommenen Text festgelegte Stichworte, in diesem Fall Ja /Nein und selbst festgelegte quivalente Aussagen (z.B. Okay = Ja).",
        "info": "",
        "x": 700,
        "y": 1740,
        "wires": [],
        "icon": "font-awesome/fa-search"
    },
    {
        "id": "3fc25ee3.a8e912",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Entsprechend der Konfiguration werden unterschiedliche Werte weitergegeben: Hier yes / no.",
        "info": "",
        "x": 510,
        "y": 1780,
        "wires": [],
        "icon": "font-awesome/fa-search"
    },
    {
        "id": "f4b0c63.c5dff38",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Es sind aber theoretisch auch mehr als zwei Fallunterscheidungen mglich (z.B. Ja / Nein / Keine Angabe)",
        "info": "",
        "x": 540,
        "y": 1820,
        "wires": [],
        "icon": "font-awesome/fa-search"
    },
    {
        "id": "62c1daa5.2e5ee4",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "3c. Switch (Ja/Nein)",
        "info": "",
        "x": 270,
        "y": 1880,
        "wires": [],
        "icon": "node-red/switch.svg"
    },
    {
        "id": "4aaa184e.f74688",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Je nachdem was in der vorherigen Node erkannt wurde, entscheidet diese Node ber die Weiterentwicklung des Dialogs.",
        "info": "",
        "x": 590,
        "y": 1920,
        "wires": [],
        "icon": "node-red/switch.svg"
    },
    {
        "id": "636e0e96.a842a",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Bei Antwort \"Nein\" wird der Dialog abgebrochen und die interagierende Person verabschiedet.",
        "info": "",
        "x": 510,
        "y": 1960,
        "wires": [],
        "icon": "node-red/switch.svg"
    },
    {
        "id": "84d92b5a.b579c8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Bei Antwort \"Ja\" wird der Dialog fortgefhrt und die nchste Frage abgespielt.",
        "info": "",
        "x": 460,
        "y": 2000,
        "wires": [],
        "icon": "node-red/switch.svg"
    },
    {
        "id": "d4ccfd6.e9e6f",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- (Die hier erkannte Antwort wird nicht mit Hilfe von tools-output gespeichert, da ihr Inhalt nur fr die Entwicklung des Dialogs wichtig ist.)",
        "info": "",
        "x": 640,
        "y": 2040,
        "wires": [],
        "icon": "node-red/switch.svg"
    },
    {
        "id": "d3db58b4.ca1688",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "4. Antwort speichern",
        "info": "",
        "x": 270,
        "y": 2100,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "1e297582.5ef1ba",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "5. In Datenbank speichern",
        "info": "",
        "x": 290,
        "y": 2240,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "af4f22c5.cb82f",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "6. Antwort ausgeben lassen",
        "info": "",
        "x": 300,
        "y": 2340,
        "wires": [],
        "icon": "node-red/debug.svg"
    },
    {
        "id": "a1b1f822.0e3df8",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Jede Eingabe, die gespeichert werden soll, wird durch die Operation \"append\" dem aktuellen Eintrag hinzugefuegt.",
        "info": "",
        "x": 570,
        "y": 2140,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "565850b1.f6c1b",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Am Ende des Dialogs koennen die Eingaben mit der Node \"tools-write-output\" gespeichert werden.",
        "info": "",
        "x": 530,
        "y": 2280,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "86bffff.fbed1",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "-  Zu jeder Eingabe kann ein Topic angegeben werden (z.B. falls man spter alle Eingaben zu dieser Frage zusammenfassen will).",
        "info": "",
        "x": 610,
        "y": 2180,
        "wires": [],
        "icon": "font-awesome/fa-save"
    },
    {
        "id": "ff790b42.959d18",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- Diese Node erlaubt es, innerhalb des Dialog-Flows Nachrichten abzugreifen um den Flow zu testen, bzw. sich die Ausgabe anzusehen.",
        "info": "",
        "x": 640,
        "y": 2380,
        "wires": [],
        "icon": "node-red/debug.svg"
    },
    {
        "id": "6b614b39.7c2714",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "2. Frage: Als erstes...",
        "info": "",
        "x": 280,
        "y": 1300,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "164a3705.8e3099",
        "type": "comment",
        "z": "1c156992.8e395e",
        "name": "- es empfielt sich mit einer einfachen Ja/Nein Frage in den Dialog zu starten",
        "info": "",
        "x": 450,
        "y": 1340,
        "wires": [],
        "icon": "font-awesome/fa-file-audio-o"
    },
    {
        "id": "b461e140.437c7",
        "type": "comment",
        "z": "5e5de4d5.8fa87c",
        "name": "reenable button after some time",
        "info": "",
        "x": 610,
        "y": 200,
        "wires": []
    }
]